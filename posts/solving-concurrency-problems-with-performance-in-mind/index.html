<!DOCTYPE html><html lang="ko-KR" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.0" /><meta property="og:title" content="동시성 문제 해결 방안 성능 실험" /><meta property="og:locale" content="ko_KR" /><meta name="description" content="동시성 문제란? 여러 프로세스나 스레드가 동시에 실행되는 상황에서 자원(데이터 등)을 제대로 공유하거나 수정하지 못해 발생하는 문제" /><meta property="og:description" content="동시성 문제란? 여러 프로세스나 스레드가 동시에 실행되는 상황에서 자원(데이터 등)을 제대로 공유하거나 수정하지 못해 발생하는 문제" /><link rel="canonical" href="https://a3magic3pocket.github.io/posts/solving-concurrency-problems-with-performance-in-mind/" /><meta property="og:url" content="https://a3magic3pocket.github.io/posts/solving-concurrency-problems-with-performance-in-mind/" /><meta property="og:site_name" content="의사줌치" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2025-04-06T08:48:05+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="동시성 문제 해결 방안 성능 실험" /><meta name="twitter:site" content="@twitter_username" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"description":"동시성 문제란? 여러 프로세스나 스레드가 동시에 실행되는 상황에서 자원(데이터 등)을 제대로 공유하거나 수정하지 못해 발생하는 문제","url":"https://a3magic3pocket.github.io/posts/solving-concurrency-problems-with-performance-in-mind/","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://a3magic3pocket.github.io/posts/solving-concurrency-problems-with-performance-in-mind/"},"headline":"동시성 문제 해결 방안 성능 실험","dateModified":"2025-04-11T22:27:26+09:00","datePublished":"2025-04-06T08:48:05+09:00","@context":"https://schema.org"}</script><title>동시성 문제 해결 방안 성능 실험 | 의사줌치</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="의사줌치"><meta name="application-name" content="의사줌치"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script async src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-5NQ41XXW83"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-5NQ41XXW83'); }); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/sample/avatar-crop.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">의사줌치</a></div><div class="site-subtitle font-italic">부정확한 정보를 <br /> 담고 있을 수 있습니다.</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/a3magic3pocket" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" class="order-4" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['a3magic3pocket','gmail.com'].join('@')" aria-label="email" class="order-5" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" class="order-6" > <i class="fas fa-rss"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>동시성 문제 해결 방안 성능 실험</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>동시성 문제 해결 방안 성능 실험</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> 의사줌치 </span> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Sun, Apr 6, 2025, 8:48 AM +0900" prep="on" > Apr 6 <i class="unloaded">2025-04-06T08:48:05+09:00</i> </span></div><div> <span> <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Fri, Apr 11, 2025, 10:27 PM +0900" prefix="Updated " > Apr 11 <i class="unloaded">2025-04-11T22:27:26+09:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2442 words">13 min</span></div></div><div class="post-content"><h2 id="동시성-문제란">동시성 문제란?</h2><ul><li>여러 프로세스나 스레드가 동시에 실행되는 상황에서 자원(데이터 등)을 <br /> 제대로 공유하거나 수정하지 못해 발생하는 문제</ul><h2 id="구체적인-상황">구체적인 상황</h2><ul><li>id, numLikes 필드로 이뤄진 POST 테이블이 있다.<li>likePost 함수는 postId를 인자로 받고, <br /> post을 조회한 뒤 기존 numLikes를 읽고 그 값에 +1을 한 값을 저장한다.<li>이때 두 트랜잭션이 동시에 likePost 함수를 호출하면<br /> 둘 중 하나의 트랜잭션은 덮어쓰기 되어 갱신이 소실된다.</ul><h2 id="해결-방법">해결 방법</h2><ul><li>비관적 락(pessimistic lock)<ul><li>DB에서 대상이 되는 POST.id 행을 배타적 잠금한다.<li>락을 확보한 트랜잭션이 작업을 완료할때까지<br /> 다른 트랜잭션들은 대기한다.<li>대기가 길어서 트랜잭션 타임아웃 시간을 초과하면 <br /> 트랜잭션은 실패하고 롤백 처리된다.<li>배타적 잠금이기 때문에 조회도 대기하게 된다.</ul><li>낙천적 락(optimistic lock)<ul><li>version 필드를 두어서 이를 애플리케이션에서 처리하여<br /> 동시성 문제를 해결한다.<li>likePost 함수의 경우 어떻게 동작하는지 설명한다.<li>조회 단계<ul><li><code class="language-plaintext highlighter-rouge">SELECT id, numLikes, version FROM POST WHERE id = 1</code><br /> 실행한 결과 <code class="language-plaintext highlighter-rouge">numLikes = 1</code>, <code class="language-plaintext highlighter-rouge">version = 1</code>을 받는다.</ul><li>수정 작업<ul><li>numLikes를 2로 업데이트 한다.<br /> version도 2로 업데이트 한다.<br /> 이때 where 절에 <code class="language-plaintext highlighter-rouge">version = 1</code>을 추가한다.<li><code class="language-plaintext highlighter-rouge">UPDATE POST SET numLikes = 2, version = 2 WHERE id = 1 AND version = 1</code></ul><li>Optimistic Locking 동작 (버전 비교)<ul><li>정상적인 경우<ul><li><code class="language-plaintext highlighter-rouge">version = 1</code>로 읽어온 객체가 수정되어 저장될때,<br /> <code class="language-plaintext highlighter-rouge">version = 1</code>이 <code class="language-plaintext highlighter-rouge">UPDATE</code> 쿼리의 조건에 포함되므로,<br /> <code class="language-plaintext highlighter-rouge">version = 1</code>인 데이터가 존재하면 <code class="language-plaintext highlighter-rouge">UPDATE</code>가 <br /> 정상적으로 실행된다.</ul><li>경쟁 상태<ul><li>만약 첫 번째 스레드가 <code class="language-plaintext highlighter-rouge">version = 1</code>로 numLikes를 읽은 후,<br /> 두 번째 스레드에서 numLikes를 수정하여 <code class="language-plaintext highlighter-rouge">version = 2</code>로 갱신했다면,<br /> 첫 번째 스레드는 더 이상 <code class="language-plaintext highlighter-rouge">version = 1</code>을 가진 데이터를 <br /> 수정할 수 없다.<li>이 경우, <code class="language-plaintext highlighter-rouge">UPDATE</code> 쿼리가 영향을 미치지 않게 되며<br /> 애플리케이션(예를 들면 스프링)에서 <br /> 예외(OptimisticLockingFailureException)를 발생시킨다.</ul></ul></ul><li>단일 스레드, 비동기 배치 처리<ul><li>동시성 문제는 여러 프로세스나 스레드에서 동시에 <br /> 특정 자원을 점유할때 발생한다.<li>단일스레드만 사용하여 자원을 점유하게 하면<br /> 동시성 문제를 막을 수 있다.<li>배치 작업을 위하여 요청과 처리를 분리한다.<li>요청<ul><li>레디스와 같은 단일스레드 메세지 큐를 두고<br /> 요청은 레디스 메세지 큐에 쌓는다.</ul><li>처리<ul><li>메세지 큐에서 꺼내어 작업뭉치를 꺼낸뒤 <br /> 비동기로 배치 작업을 처리하는 프로그램을 단일 스레드로 운영한다.<li>예를들면 큐에서 3개의 작업을 꺼낸다.<ul><li>likePost(postId = 1)<li>likePost(postId = 2)<li>likePost(postId = 3)</ul><li>autoCommit = false로 전환한뒤<br /> 3개의 작업을 진행한다.<li>문제가 없다면 commit하고 문제가 있으면 롤백한다.<br /> 이때 롤백이 되면 3개 작업 모두 롤백된다.</ul></ul></ul><h2 id="실험-환경">실험 환경</h2><ul><li>웹 프레임워크: 스프링부트, 코틀린<li>DB: 마리아디비<li>메세지 큐: 레디스 리스트<li>테스트 툴: k6</ul><h2 id="테스트-환경">테스트 환경</h2><ul><li>k6 설정<ul><li>가상사용자 수(vus): 100개<li>총 요청 수 (iterations): 3000개 또는 6000개<li>시간 (duration): 5분</ul><li>k6 설정 설명<ul><li>100 명의 유저가 3000개 요청을 5분 동안 동시에 진행한다.<li>5분이 되기 전에 총 요청 수가 3000에 도달하면 중지한다.</ul><li>pessimistic lock 설정<ul><li>timeout: 5초<li>격리수준(isolation level): REPEATABLE_READ</ul><li>optimistic lock 설정<ul><li>timeout: 20초<li>격리수준: REPEATABLE_READ<li>OptimisticLockingFailureException 발생 시 최대 허용 재시도 수: 30<li>OptimisticLockingFailureException 발생 시 대기시간: 0.1초</ul><li>단일 스레드, 비동기 배치 처리 설정<ul><li>DB timeout: 5초<li>DB 격리수준: REPEATABLE_READ<li>비동기 배치 함수 배치 크기: 20개<li>비동기 배치 함수가 담긴 스프링 스케쥴러 fixedDelay: 0.1초<ul><li>fixedDelay는 이전 작업이 완료된 후 재시도 하기 전까지 대기 시간</ul></ul></ul><h2 id="테스트-시나리오">테스트 시나리오</h2><ul><li>1번 시나리오<ul><li>단순 문자열만 리턴하는 컨트롤러 조회<li>실험의 대조군으로 사용하기 위해 조회<li>naive 요청 3000번 조회</ul><li>2번 시나리오<ul><li>한 요청에서 ‘likePost(postId = someId)’만 실행<br /> 즉, 한 트랜잭션에서 조회 및 갱신 요청만 실행<li>요청 3000번 실행</ul><li>3번 시나리오<ul><li>한 요청에서 ‘모든 post 목록 조회’와 <br /> ‘likePost(postId = someId)’를 묶어서 실행<br /> 즉, 한 트랜잭션에서 조회 한 번, 한 트랜잭션에서 조회 및 갱신 요청 한 번<li>모든 post 목록 조회 3000번, <br /> likePost(postId = someId) 3000번 실행</ul><li>4번 시나리오<ul><li>한 요청에서 ‘모든 post 목록 조회’ 또는 ‘likePost(postId = someId)’를 실행<br /> 이때 ‘모든 post 목록 조회’를 전체 요청 수의 90%를 진행하고 ‘likePost(postId = someId)’는 전체 요청 수의 10%만 진행<li>모든 post 목록 조회 5400번,<br /> likePost(postId = someId) 600번 실행</ul></ul><h2 id="결과">결과</h2><ul><li>1번 시나리오 - naive 요청<ul><li>총 요청 수: 3000<li>총 실패 수: 0<li>테스트 완료 시간(ms): 3363.41</ul><li>2번 시나리오 - likePost 만 진행<ul><li>pessimistic lock<ul><li>총 요청 수: 3000<li>총 실패 수: 0<li>테스트 완료 시간(ms): 20111.89</ul><li>optimistic lock<ul><li>총 요청 수: 3000<li>총 실패 수: 0<li>테스트 완료 시간(ms): 31873.77</ul><li>단일 스레드, 비동기 배치 처리<ul><li>총 요청 수: 3000<li>총 실패 수: 0<li>테스트 완료 시간(ms): 17954.14</ul></ul><li>3번 시나리오 - 모든 post 조회와 likePost 1대1 처리<ul><li>pessimistic lock<ul><li>총 요청 수: 6000<li>총 실패 수: 0<li>테스트 완료 시간(ms): 27453.60</ul><li>optimistic lock<ul><li>총 요청 수: 6000<li>총 실패 수: 0<li>테스트 완료 시간(ms): 37709.28</ul><li>단일 스레드, 비동기 배치 처리<ul><li>총 요청 수: 6000<li>총 실패 수: 0<li>테스트 완료 시간(ms): 23220.97</ul></ul><li>4번 시나리오 - 모든 post 조회와 likePost 1대9 처리<ul><li>pessimistic lock<ul><li>총 요청 수: 6000<li>총 실패 수: 0<li>테스트 완료 시간(ms): 16909.48</ul><li>optimistic lock<ul><li>총 요청 수: 6000<li>총 실패 수: 0<li>테스트 완료 시간(ms): 24357.44</ul><li>단일 스레드, 비동기 배치 처리<ul><li>총 요청 수: 6000<li>총 실패 수: 0<li>테스트 완료 시간(ms): 20432.77</ul></ul></ul><h2 id="의의">의의</h2><ul><li>모든 경우에서 optimistic lock 보다 pessimistic lock의 처리속도가 더 빨랐다.<li>optimistic lock의 경우, 실패 후 재시도 시간을 너무 길게 잡으면<br /> 처리 속도가 엄청나게 느려지며, 재시도 시간이 너무 긴 경우 <br /> DB 타임아웃이 발생하여 트랜잭션이 실패한다.<li>읽기 비중이 높은 환경에서는 모든 케이스에서 처리시간이 단축되었으며,<br /> 특히 Optimistic lock은 Pessimistic lock보다 더 큰 성능 개선 효과를 보였다.<li>pessimistic lock과 optimistic lock 모두에서 <br /> 시나리오 3번(쓰기:읽기 = 1:1)보다 4번(쓰기:읽기=1:9)이 테스트 종료 시간이 더 짧았다.<br /> 또한 시나리오 3과 4 간의 성능 향상 폭은 Optimistic lock에서 더 크게 나타났다.<li><code class="language-plaintext highlighter-rouge">단일 스레드, 비동기 배치 처리</code>는 모든 시나리오에서 상대적으로 일정한 처리 속도를 보인다.<li><code class="language-plaintext highlighter-rouge">단일 스레드, 비동기 배치 처리</code>는 처리가 비동기로 이뤄지기 때문에<br /> 테스트가 종료된 후 일정 시간이 지나야 처리가 완료된다.<li><code class="language-plaintext highlighter-rouge">단일 스레드, 비동기 배치 처리</code>는 스케쥴러 대기 시간을 길게 설정하거나 배치 크기를 줄일 경우, 처리가 완료되는 시간이 엄청나게 늘어난다.</ul><h2 id="결론">결론</h2><ul><li>여러 스레드에서 동시에 WRITE가 발생할 상황이 조금이라도 생긴다면<br /> pessimistic lock을 쓰는게 더 유리한 것으로 보인다.<li>optimistic lock의 경우 timeout 시간과 재시도 대기 시간을 잘 설정해야만<br /> 성능이 좋아진다.<li>예를 들어 현재 테스트 시나리오에서 optimistic lock의 timeout을 <br /> 5로 했을때보다 20으로 했을때가 처리시간이 더 짧다.<br /> 아마도 timeout 시간이 짧으면 재시도 대기를 하는 요청도<br /> 늘어나기 때문에 전반적인 처리 시간이 늘어나는 것으로 추정한다.<li>3번 시나리오에 비해 4번 시나리오의 처리 속도는<br /> optimistic lock이 pessimistic lock 보다 더 많이 향상되었다.<br /> 이를 통해 충돌이 거의 없는 환경에서는 optimistic lock이 <br /> pessimistic lock보다 더 처리속도가 빠를 것으로 추정한다.<li><code class="language-plaintext highlighter-rouge">단일 스레드, 비동기 배치 처리</code> 는 다른 방법에 비해 <br /> 상대적으로 균일한 처리 속도를 보여준다.<br /> 하지만 비동기이기 때문에 실시간으로 조회가 이뤄져야 하는 경우<br /> 사용하기 어렵다.<br /> 비동기 스케줄러 시간을 줄이면 전반적인 처리 속도는 상승한다.</ul><h2 id="예시-github-repository">예시 github repository</h2><ul><li><a href="https://github.com/a3magic3pocket/concurrency-control-sandbox" target="_blank">concurrency-control-sandbox</a></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/concurrency/'>Concurrency</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/k6/" class="post-tag no-text-decoration" >k6</a> <a href="/tags/lock/" class="post-tag no-text-decoration" >lock</a> <a href="/tags/essay/" class="post-tag no-text-decoration" >essay</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=동시성 문제 해결 방안 성능 실험 - 의사줌치&url=https://a3magic3pocket.github.io/posts/solving-concurrency-problems-with-performance-in-mind/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=동시성 문제 해결 방안 성능 실험 - 의사줌치&u=https://a3magic3pocket.github.io/posts/solving-concurrency-problems-with-performance-in-mind/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=동시성 문제 해결 방안 성능 실험 - 의사줌치&url=https://a3magic3pocket.github.io/posts/solving-concurrency-problems-with-performance-in-mind/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/kafka-large-scale-event-processing-architecture-and-performance-comparison/">Kafka를 활용한 대용량 이벤트 처리 구조 설계와 성능 비교</a><li><a href="/posts/experimenting-with-blue-green-deployments/">블루 - 그린 배포 실험</a><li><a href="/posts/spring-kafka-latest-message-pub-sub-config/">Spring Kafka에서 최신 메시지만 소비하는 Pub/Sub 방식 설정</a><li><a href="/posts/solving-concurrency-problems-with-performance-in-mind/">동시성 문제 해결 방안 성능 실험</a><li><a href="/posts/exploring-authentication-options/">인증방식 고민</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/kafka/">kafka</a> <a class="post-tag" href="/tags/kotlin/">kotlin</a> <a class="post-tag" href="/tags/elasticsearch/">elasticsearch</a> <a class="post-tag" href="/tags/elk/">elk</a> <a class="post-tag" href="/tags/spring/">spring</a> <a class="post-tag" href="/tags/summary/">summary</a> <a class="post-tag" href="/tags/git/">git</a> <a class="post-tag" href="/tags/kafka-streams/">kafka-streams</a> <a class="post-tag" href="/tags/nest/">nest</a> <a class="post-tag" href="/tags/react/">react</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/experimenting-with-blue-green-deployments/"><div class="card-body"> <span class="timeago small" > Apr 6 <i class="unloaded">2025-04-06T08:47:25+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>블루 - 그린 배포 실험</h3><div class="text-muted small"><p> 블루 - 그린 배포란? 두 개의 동일한 환경(블루와 그린)을 유지하며, 새 버전을 배포한 후 트래픽을 전환하여 새로운 버전을 운영에 적용 왜 하는가? 새로운 애플리케이션 버전을 배포하면서 서비스 중단 없이 안전하게 전환하기 위해서 작동 방식 블루 환경에서 운영 중 기존 애플리케이션(블루)이 사용자의 모든 트...</p></div></div></a></div><div class="card"> <a href="/posts/exploring-authentication-options/"><div class="card-body"> <span class="timeago small" > Apr 6 <i class="unloaded">2025-04-06T08:49:12+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>인증방식 고민</h3><div class="text-muted small"><p> 세션 인증 방식과 JWT 인증 방식의 차이 세션 방식 서버에서 사용자 정보를 key-value 저장소에 저장 서버에서 key를 사용자 쿠키에 담아서 전송 사용자가 인증이 필요한 요청을 하면 요청과 함께 키가 담긴 쿠키가 서버로 전송됨 서버는 key를 가지고 key-value 저장소를 조회하여 인...</p></div></div></a></div><div class="card"> <a href="/posts/metrics-monitoring-with-prometheus-grafana-and-alertmanager/"><div class="card-body"> <span class="timeago small" > Apr 6 <i class="unloaded">2025-04-06T08:49:51+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>메트릭 모니터링(prometheus, grafana, alertmanager)</h3><div class="text-muted small"><p> 정의 시스템 상태와 성능을 지속적으로 관찰하고 분석하는 과정 이를 통해 문제를 조기에 발견하는 것을 목표로 한다. 메트릭(metric)이란 시스템, 애플리케이션 또는 프로세스의 성능이나 상태를 수치적으로 표현한 데이터 포인트 우리는 메트릭을 지속적으로 수집하여 문제 발생 시 경고(alert)을 보내거나 시각화하여 문제를 빠르게 판단...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/experimenting-with-blue-green-deployments/" class="btn btn-outline-primary" prompt="Older"><p>블루 - 그린 배포 실험</p></a> <a href="/posts/exploring-authentication-options/" class="btn btn-outline-primary" prompt="Newer"><p>인증방식 고민</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://github.com/a3magic3pocket">의사줌치</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/kafka/">kafka</a> <a class="post-tag" href="/tags/kotlin/">kotlin</a> <a class="post-tag" href="/tags/elasticsearch/">elasticsearch</a> <a class="post-tag" href="/tags/elk/">elk</a> <a class="post-tag" href="/tags/spring/">spring</a> <a class="post-tag" href="/tags/summary/">summary</a> <a class="post-tag" href="/tags/git/">git</a> <a class="post-tag" href="/tags/kafka-streams/">kafka streams</a> <a class="post-tag" href="/tags/nest/">nest</a> <a class="post-tag" href="/tags/react/">react</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://a3magic3pocket.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
