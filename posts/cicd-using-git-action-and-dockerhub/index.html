<!DOCTYPE html><html lang="ko-KR" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.0" /><meta property="og:title" content="git action과 dockerhub을 이용한 CI/CD 파이프라인 구축" /><meta property="og:locale" content="ko_KR" /><meta name="description" content="CI/CD란 상세한 정의 Red Hat 문서에 상세하게 잘 적혀있다. CI/CD(CI CD, 지속적 통합/지속적 배포): 개념, 툴, 구축, 차이 (redhat.com) CI/CD 파이프라인: 개념, 방법, 장점, 구현 과정 (redhat.com) CI 여러 개발 소스를 자동으로 합쳐준다. 임시로 합친 결과물은 테스트(test)를 통과해야하며 통과하지 못하면 최종 소스코드에 반영되지 않는다. 예시 가정 A와 B 개발자가 함께 사용하는 github 레포지토리 ‘MyWork’가 있다. ‘MyWork’에는 main, develop이라는 두 개의 브랜치가 존재한다. main는 최종 상품에 해당하는 브랜치이다. develop은 개발자의 개발본이 합쳐지는 브랜치이다. CI 정책을 아래와 같이 가져갈 수 있다. A가 local ‘MyWork’에서 개발 후 개발 내역을 remote ‘MyWork’ 브랜치로 push 한다. push된 소스코드가 유효한지 CI서비스에서 테스트를 진행한다. 만약 테스트를 통과하였다면 remote ‘MyWork’ develop 브랜치에 merge 된다. 만약 테스트를 통과하지 못하였다면 remote ‘MyWork’ develop 브랜치에 merge 되지 않는다. ‘MyWork’에서 개발하는 모든 개발자는 동일한 과정을 겪는다. CD CI를 통과한 소스코드는 테스트를 통과하였기 때문에 검증되었다고 볼 수 있다. 이를 믿고 실제 서버로 최신 소스코드를 자동으로 배포한다. 예시 가정 CI 환경과 동일한 환경이다. main는 직접 push가 불가능하고 개발자 A가 develop 브랜치에서 pull request 하여 merge 할 수 있다. main브랜치 역시 소스코드가 업데이트되면 CI 서비스가 테스트를 시작한다. 테스트를 통과하면 배포를 시작한다. 서비스는 docker container 기반으로 운영 중이라고 가정한다. 서비스 배포는 아래와 같이 진행된다. CI 서비스에서 테스트를 위해 이미지 생성 CI 서비스에서 docker registry 서버로 이미지 push docker registry 서버에서 서비스 서버로 최신 이미지가 push 되었다고 알림 서비스 서버에서 docker registry 서버에 있는 최신 이미지를 가져와서 배포 CD 정책을 아래와 같이 가져갈 수 있다. A가 ‘MyWork’ develop 브랜치에서 main 브랜치로 pull request를 진행하고 merge 한다. CI 서비스에서 main 브랜치의 최신 소스코드의 테스트가 진행된다. 테스트 시 빌드한 이미지가 존재할 것이다. 테스트를 통과하였다면 docker registry 서버로 이미지를 push한다. docker registry 서버는 이미지를 받으면 서비스 서버에 이를 알린다. 서비스 서버는 새로 업데이트된 이미지를 docker registry 서버로부터 가져와 배포를 진행한다." /><meta property="og:description" content="CI/CD란 상세한 정의 Red Hat 문서에 상세하게 잘 적혀있다. CI/CD(CI CD, 지속적 통합/지속적 배포): 개념, 툴, 구축, 차이 (redhat.com) CI/CD 파이프라인: 개념, 방법, 장점, 구현 과정 (redhat.com) CI 여러 개발 소스를 자동으로 합쳐준다. 임시로 합친 결과물은 테스트(test)를 통과해야하며 통과하지 못하면 최종 소스코드에 반영되지 않는다. 예시 가정 A와 B 개발자가 함께 사용하는 github 레포지토리 ‘MyWork’가 있다. ‘MyWork’에는 main, develop이라는 두 개의 브랜치가 존재한다. main는 최종 상품에 해당하는 브랜치이다. develop은 개발자의 개발본이 합쳐지는 브랜치이다. CI 정책을 아래와 같이 가져갈 수 있다. A가 local ‘MyWork’에서 개발 후 개발 내역을 remote ‘MyWork’ 브랜치로 push 한다. push된 소스코드가 유효한지 CI서비스에서 테스트를 진행한다. 만약 테스트를 통과하였다면 remote ‘MyWork’ develop 브랜치에 merge 된다. 만약 테스트를 통과하지 못하였다면 remote ‘MyWork’ develop 브랜치에 merge 되지 않는다. ‘MyWork’에서 개발하는 모든 개발자는 동일한 과정을 겪는다. CD CI를 통과한 소스코드는 테스트를 통과하였기 때문에 검증되었다고 볼 수 있다. 이를 믿고 실제 서버로 최신 소스코드를 자동으로 배포한다. 예시 가정 CI 환경과 동일한 환경이다. main는 직접 push가 불가능하고 개발자 A가 develop 브랜치에서 pull request 하여 merge 할 수 있다. main브랜치 역시 소스코드가 업데이트되면 CI 서비스가 테스트를 시작한다. 테스트를 통과하면 배포를 시작한다. 서비스는 docker container 기반으로 운영 중이라고 가정한다. 서비스 배포는 아래와 같이 진행된다. CI 서비스에서 테스트를 위해 이미지 생성 CI 서비스에서 docker registry 서버로 이미지 push docker registry 서버에서 서비스 서버로 최신 이미지가 push 되었다고 알림 서비스 서버에서 docker registry 서버에 있는 최신 이미지를 가져와서 배포 CD 정책을 아래와 같이 가져갈 수 있다. A가 ‘MyWork’ develop 브랜치에서 main 브랜치로 pull request를 진행하고 merge 한다. CI 서비스에서 main 브랜치의 최신 소스코드의 테스트가 진행된다. 테스트 시 빌드한 이미지가 존재할 것이다. 테스트를 통과하였다면 docker registry 서버로 이미지를 push한다. docker registry 서버는 이미지를 받으면 서비스 서버에 이를 알린다. 서비스 서버는 새로 업데이트된 이미지를 docker registry 서버로부터 가져와 배포를 진행한다." /><link rel="canonical" href="https://a3magic3pocket.github.io/posts/cicd-using-git-action-and-dockerhub/" /><meta property="og:url" content="https://a3magic3pocket.github.io/posts/cicd-using-git-action-and-dockerhub/" /><meta property="og:site_name" content="의사줌치" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2023-02-05T12:49:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="git action과 dockerhub을 이용한 CI/CD 파이프라인 구축" /><meta name="twitter:site" content="@twitter_username" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"description":"CI/CD란 상세한 정의 Red Hat 문서에 상세하게 잘 적혀있다. CI/CD(CI CD, 지속적 통합/지속적 배포): 개념, 툴, 구축, 차이 (redhat.com) CI/CD 파이프라인: 개념, 방법, 장점, 구현 과정 (redhat.com) CI 여러 개발 소스를 자동으로 합쳐준다. 임시로 합친 결과물은 테스트(test)를 통과해야하며 통과하지 못하면 최종 소스코드에 반영되지 않는다. 예시 가정 A와 B 개발자가 함께 사용하는 github 레포지토리 ‘MyWork’가 있다. ‘MyWork’에는 main, develop이라는 두 개의 브랜치가 존재한다. main는 최종 상품에 해당하는 브랜치이다. develop은 개발자의 개발본이 합쳐지는 브랜치이다. CI 정책을 아래와 같이 가져갈 수 있다. A가 local ‘MyWork’에서 개발 후 개발 내역을 remote ‘MyWork’ 브랜치로 push 한다. push된 소스코드가 유효한지 CI서비스에서 테스트를 진행한다. 만약 테스트를 통과하였다면 remote ‘MyWork’ develop 브랜치에 merge 된다. 만약 테스트를 통과하지 못하였다면 remote ‘MyWork’ develop 브랜치에 merge 되지 않는다. ‘MyWork’에서 개발하는 모든 개발자는 동일한 과정을 겪는다. CD CI를 통과한 소스코드는 테스트를 통과하였기 때문에 검증되었다고 볼 수 있다. 이를 믿고 실제 서버로 최신 소스코드를 자동으로 배포한다. 예시 가정 CI 환경과 동일한 환경이다. main는 직접 push가 불가능하고 개발자 A가 develop 브랜치에서 pull request 하여 merge 할 수 있다. main브랜치 역시 소스코드가 업데이트되면 CI 서비스가 테스트를 시작한다. 테스트를 통과하면 배포를 시작한다. 서비스는 docker container 기반으로 운영 중이라고 가정한다. 서비스 배포는 아래와 같이 진행된다. CI 서비스에서 테스트를 위해 이미지 생성 CI 서비스에서 docker registry 서버로 이미지 push docker registry 서버에서 서비스 서버로 최신 이미지가 push 되었다고 알림 서비스 서버에서 docker registry 서버에 있는 최신 이미지를 가져와서 배포 CD 정책을 아래와 같이 가져갈 수 있다. A가 ‘MyWork’ develop 브랜치에서 main 브랜치로 pull request를 진행하고 merge 한다. CI 서비스에서 main 브랜치의 최신 소스코드의 테스트가 진행된다. 테스트 시 빌드한 이미지가 존재할 것이다. 테스트를 통과하였다면 docker registry 서버로 이미지를 push한다. docker registry 서버는 이미지를 받으면 서비스 서버에 이를 알린다. 서비스 서버는 새로 업데이트된 이미지를 docker registry 서버로부터 가져와 배포를 진행한다.","url":"https://a3magic3pocket.github.io/posts/cicd-using-git-action-and-dockerhub/","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://a3magic3pocket.github.io/posts/cicd-using-git-action-and-dockerhub/"},"headline":"git action과 dockerhub을 이용한 CI/CD 파이프라인 구축","dateModified":"2024-02-19T12:18:35+09:00","datePublished":"2023-02-05T12:49:00+09:00","@context":"https://schema.org"}</script><title>git action과 dockerhub을 이용한 CI/CD 파이프라인 구축 | 의사줌치</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="의사줌치"><meta name="application-name" content="의사줌치"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script async src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-5NQ41XXW83"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-5NQ41XXW83'); }); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/sample/avatar-crop.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">의사줌치</a></div><div class="site-subtitle font-italic">부정확한 정보를 <br /> 담고 있을 수 있습니다.</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/a3magic3pocket" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" class="order-4" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['a3magic3pocket','gmail.com'].join('@')" aria-label="email" class="order-5" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" class="order-6" > <i class="fas fa-rss"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>git action과 dockerhub을 이용한 CI/CD 파이프라인 구축</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>git action과 dockerhub을 이용한 CI/CD 파이프라인 구축</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> 의사줌치 </span> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Sun, Feb 5, 2023, 12:49 PM +0900" prep="on" > Feb 5, 2023 <i class="unloaded">2023-02-05T12:49:00+09:00</i> </span></div><div> <span> <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Mon, Feb 19, 2024, 12:18 PM +0900" prefix="Updated " > Feb 19, 2024 <i class="unloaded">2024-02-19T12:18:35+09:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="3672 words">20 min</span></div></div><div class="post-content"><h2 id="cicd란">CI/CD란</h2><ul><li>상세한 정의<ul><li>Red Hat 문서에 상세하게 잘 적혀있다.<ul><li><a href="https://www.redhat.com/ko/topics/devops/what-is-ci-cd" target="_blank">CI/CD(CI CD, 지속적 통합/지속적 배포): 개념, 툴, 구축, 차이 (redhat.com)</a><li><a href="https://www.redhat.com/ko/topics/devops/what-cicd-pipeline" target="_blank">CI/CD 파이프라인: 개념, 방법, 장점, 구현 과정 (redhat.com)</a></ul></ul><li>CI<ul><li>여러 개발 소스를 자동으로 합쳐준다.<li>임시로 합친 결과물은 테스트(test)를 통과해야하며 <br /> 통과하지 못하면 최종 소스코드에 반영되지 않는다.<li>예시<ul><li>가정<ul><li>A와 B 개발자가 함께 사용하는 github 레포지토리 ‘MyWork’가 있다.<li>‘MyWork’에는 main, develop이라는 두 개의 브랜치가 존재한다.<li>main는 최종 상품에 해당하는 브랜치이다.<li>develop은 개발자의 개발본이 합쳐지는 브랜치이다.</ul><li>CI 정책을 아래와 같이 가져갈 수 있다.<ul><li>A가 local ‘MyWork’에서 개발 후 개발 내역을<br /> remote ‘MyWork’ 브랜치로 push 한다.<li>push된 소스코드가 유효한지 CI서비스에서 테스트를 진행한다.<li>만약 테스트를 통과하였다면 remote ‘MyWork’ develop 브랜치에 merge 된다.<li>만약 테스트를 통과하지 못하였다면 <br /> remote ‘MyWork’ develop 브랜치에 merge 되지 않는다.<li>‘MyWork’에서 개발하는 모든 개발자는 동일한 과정을 겪는다.</ul></ul></ul><li>CD<ul><li>CI를 통과한 소스코드는 테스트를 통과하였기 때문에 <br /> 검증되었다고 볼 수 있다.<li>이를 믿고 실제 서버로 최신 소스코드를 자동으로 배포한다.<li>예시<ul><li>가정<ul><li>CI 환경과 동일한 환경이다.<li>main는 직접 push가 불가능하고 개발자 A가 develop 브랜치에서 pull request 하여 merge 할 수 있다.<li>main브랜치 역시 소스코드가 업데이트되면 CI 서비스가 테스트를 시작한다.<li>테스트를 통과하면 배포를 시작한다.<li>서비스는 docker container 기반으로 운영 중이라고 가정한다.<li>서비스 배포는 아래와 같이 진행된다.<ul><li>CI 서비스에서 테스트를 위해 이미지 생성<li>CI 서비스에서 docker registry 서버로 이미지 push<li>docker registry 서버에서 서비스 서버로 최신 이미지가<br /> push 되었다고 알림<li>서비스 서버에서 docker registry 서버에 있는 최신 이미지를 <br /> 가져와서 배포</ul></ul><li>CD 정책을 아래와 같이 가져갈 수 있다.<ul><li>A가 ‘MyWork’ develop 브랜치에서 main 브랜치로 pull request를<br /> 진행하고 merge 한다.<li>CI 서비스에서 main 브랜치의 최신 소스코드의 테스트가 진행된다.<li>테스트 시 빌드한 이미지가 존재할 것이다. 테스트를 통과하였다면 docker registry 서버로 이미지를 push한다.<li>docker registry 서버는 이미지를 받으면 서비스 서버에 이를 알린다.<li>서비스 서버는 새로 업데이트된 이미지를 docker registry 서버로부터 가져와 배포를 진행한다.</ul></ul></ul></ul><h2 id="실험환경">실험환경</h2><ul><li>CI<ul><li>우리는 git remote repository를 github을 사용할 것이다.<li>CI는 git actions을 이용하여 구축할 것이다.</ul><li>Docker registry server<ul><li>Dockerhub를 이용할 것이다.</ul><li>CD<ul><li>서비스 서버에 Webhook을 설치하여 Dockerhub에서 webhook URL을 입력하여 배포할 것이다.</ul><li>실험 시나리오<ul><li>github remote repository에서 main, develop 브랜치를 운영한다.<li>개발자가 main 브랜치에 직접 push 하는 것을 금지한다.<li>develop 브랜치로 새로운 커밋이 push가 되면 테스트를 진행하고 테스트를 통과해야만 develop 브랜치로 merge 한다.<li>팀장이 갱신된 develop 브랜치를 확인하고 문제가 없으면 main 브랜치로 pull request 한다.<li>main 브랜치로 merge 요청이 오면 테스트를 진행하고 테스트를 통과해야만 main 브랜치로 merge 한다.<li>테스트를 통과하였다면 새로 빌드된 이미지를 Dockerhub로 push 한다.<li>Dockerhub는 새 이미지를 push 되면 등록된 webhook URL로 GET 요청을 보낸다.<li>서비스 서버 Webhook은 지정된 URL로 요청을 받으면 배포 스크립트를 실행하여 배포를 진행한다.</ul><li>실험용 github repository<ul><li><a href="https://github.com/a3magic3pocket/simple-web-example" target="_blank">simple-web-example</a></ul></ul><h2 id="실험시작">실험시작</h2><ul><li>git actions 스크립트 설명<ul><li><a href="https://docs.github.com/ko/actions/learn-github-actions/understanding-github-actions" target="_blank">github actions 개요</a><li>워크플로(workflow)<ul><li>하나의 이벤트 트리거가 발생하였을때 진행해야하는 작업 묶음을 의미한다.<li>github remote repository의 .github/workflows 디렉토리 하위에 yml로 작성하면 된다.<li>워크플로는 크게 ‘이벤트’와 ‘작업’으로 나눌 수 있다.</ul><li>이벤트(event)<ul><li>이벤트는 ‘작업’들을 실행시키는 트리거로 사용할 수 있는 활동들이다.<li>예를들러 특정 브랜치에 push, pull request 활동들을 트리거로 쓸 수 있다.</ul><li>작업<ul><li>트리거로 설정된 이벤트가 발생하면 미리 지정한 작업들이 순차적으로 시작된다.<li>보통 CI 과정에서는 환경설정 작업, 테스트 작업이 포함된다.</ul><li>워크플로 기본 구조<ul><li><div class="language-yml highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre>  <span class="na">name</span><span class="pi">:</span> <span class="s">&lt;워크플로 이름&gt;</span>

  <span class="na">on</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">&lt;이벤트&gt;</span><span class="pi">]</span>
  <span class="na">jobs</span><span class="pi">:</span>
    <span class="s">&lt;작업명&gt;</span><span class="pi">:</span>
      <span class="na">runs-on</span><span class="pi">:</span> <span class="s">&lt;os 이미지명&gt;</span>
                
      <span class="na">steps</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">&lt;스텝명&gt;</span>
          <span class="na">uses</span><span class="pi">:</span> <span class="s">&lt;액션명&gt;</span>

        <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">&lt;스텝명&gt;</span>
          <span class="na">run</span><span class="pi">:</span> <span class="s">&lt;실행할 명령어&gt;</span>           
</pre></table></code></div></div><li>on<ul><li><a href="https://docs.github.com/ko/actions/using-workflows/events-that-trigger-workflows" target="_blank">워크플로를 트리거하는 이벤트 목록</a><li>트리거로 설정할 이벤트를 정한다.</ul><li>jobs &gt; MyJobID &gt; runs-on<ul><li><a href="https://docs.github.com/ko/actions/using-workflows/workflow-syntax-for-github-actions#choosing-github-hosted-runners" target="_blank">Choosing GitHub-hosted runners 목록</a><li>CI를 돌릴 머신의 OS 이미지를 선택한다고 생각하면 된다.</ul><li>jobs &gt; MyJobID &gt; steps &gt; uses<ul><li>미리 생성된 액션 환경을 이용하는 부분이다.<li>예를들어 node 환경을 구축하려고 한다면<div class="language-yml highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre>      <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/setup-node@v3</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">node-version</span><span class="pi">:</span> <span class="m">16</span>
</pre></table></code></div></div><p>을 입력하면 된다.</p><li>미리 생성된 액션은 마켓플레이스에서 검색하여 찾을 수 있다.<br /> <a href="https://github.com/marketplace?query=setup+node+" target="_blank">마켓플레이스</a><br /> <a href="https://github.com/marketplace/actions/setup-node-js-environment" target="_blank">Setup Node.js environment</a></ul><li>jobs &gt; MyJobID &gt; steps &gt; run<ul><li>쉘로 실행하고자하는 명령어를 입력한다.</ul></ul></ul><li>CI 용 git actions 스크립트 작성<ul><li>이름<ul><li><a href="https://github.com/a3magic3pocket/simple-web-example/blob/main/.github/workflows/github-actions.yml" target="_blank">github-actions.yml</a></ul><li>설명<ul><li>개발자가 local 브랜치에서 remote repository 브랜치로 커밋을 푸시한 경우, 새로 업데이트된 소스소드로 빌드한 후 테스트를 진행한다.</ul><li>본문<ul><li><div class="language-yml highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
</pre><td class="rouge-code"><pre>  <span class="c1"># 워크 플로 이름</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">simple web example CI</span>

  <span class="c1"># push 이벤트를 트리거로 사용</span>
  <span class="c1"># (이 repository의 모든 브랜치에 push 이벤트가 발생할 경우 jobs 실행)</span>
  <span class="na">on</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">push</span><span class="pi">]</span>

  <span class="c1"># 작업</span>
  <span class="na">jobs</span><span class="pi">:</span>
    <span class="c1"># 작업ID</span>
    <span class="na">test</span><span class="pi">:</span>
      <span class="c1"># ubuntu 최신 버전을 CI 머신으로 활용</span>
      <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>

      <span class="c1"># 각 단계 설정</span>
      <span class="na">steps</span><span class="pi">:</span>
        <span class="c1"># github에 있는 소스코드를 CI 머신으로 복사하기</span>
        <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Checkout</span>
          <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/checkout@v2</span>

        <span class="c1"># node 환경 구축</span>
        <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Setup Node</span>
          <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/setup-node@v2</span>
          <span class="na">with</span><span class="pi">:</span>
            <span class="na">node-version</span><span class="pi">:</span> <span class="s2">"</span><span class="s">16.13.0"</span>

        <span class="c1"># node 의존성 패키지 설치</span>
        <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Install dependencies</span>
          <span class="na">run</span><span class="pi">:</span> <span class="s">npm install</span>

        <span class="c1"># 테스트 시작</span>
        <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Test</span>
          <span class="na">run</span><span class="pi">:</span> <span class="s">npm run test</span>

        <span class="c1"># 빌드 시작</span>
        <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Build Test</span>
          <span class="na">run</span><span class="pi">:</span> <span class="s">npm run build</span>

        <span class="c1"># Dockerhub에 같은 태그를 가진 이미지가 존재하는지 확인</span>
        <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Image Tag Test</span>
          <span class="na">run</span><span class="pi">:</span> <span class="s">chmod 775 ./extract-image-tag_linux_amd64 &amp;&amp; ./extract-image-tag_linux_amd64 -f simple-web.yml -tu https://hub.docker.com/v2/namespaces/a3magic3pocket/repositories/simple-web/tags</span>    
</pre></table></code></div></div></ul></ul><li>CD용 git actions스크립트 작성<ul><li>이름<ul><li><a href="https://github.com/a3magic3pocket/simple-web-example/blob/main/.github/workflows/github-build-image.yml" target="_blank">github-build-image.yml</a></ul><li>설명<ul><li>main 브랜치에서 CI워크플로를 성공적으로 통과했다면<br /> Dockerhub repostiory로 빌드한 이미지를 push 한다.</ul><li>remote main 브랜치에 개발자가 직접 푸시 방지<ul><li>github repository로 이동. <br /> ex) <a href="https://github.com/a3magic3pocket/simple-web-example" target="_blank">simple-web-example</a><li>(상단 탭)Settings 클릭 <br /> <a href="/assets/img/2023-02-05-cicd-using-git-action-and-dockerhub/00-settings.jpg" target="_blank"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/2023-02-05-cicd-using-git-action-and-dockerhub/00-settings.jpg" width="100%" /></a><li>(좌측 사이드메뉴) Branches 클릭<li>Branch protection rules 오른쪽에 위치한 ‘Add rule’ 클릭<br /> <a href="/assets/img/2023-02-05-cicd-using-git-action-and-dockerhub/01-branches-and-rule.jpg" target="_blank"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/2023-02-05-cicd-using-git-action-and-dockerhub/01-branches-and-rule.jpg" width="100%" /></a><li>Brach name pattern*에 ‘main’ 입력<li>Require status checks to pass before merging 클릭<br /> (main 브랜치에 머지 전 이상이 없는지 아래 항목을 체크하겠다는 뜻)<ul><li>Require branches to be up to date before merging 클릭<br /> pull request에 새로 추가된 항목이 있어야 main 브랜치에 merge가능<li>pull request이 새로 추가되었다면<br /> 문제가 없는지 Status check를 해야함<li>Status checks에 사용할 git action의 job을 선택해야 함<li>github-actions.yml에 있는 job ID “test”를 입력 후 선택</ul><li>Do not allow bypassing the above settings 클릭 <br /> <a href="/assets/img/2023-02-05-cicd-using-git-action-and-dockerhub/03-rule-detail.jpg" target="_blank"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/2023-02-05-cicd-using-git-action-and-dockerhub/03-rule-detail.jpg" width="100%" /></a><li>Save Changes 클릭하여 저장</ul><li>Dockerhub repository 생성<ul><li>Dockerhub에도 미리 image를 받을 repository를 만들어두어야 한다.<li>ex) <a href="https://hub.docker.com/r/a3magic3pocket/simple-web" target="_blank">a3magic3pocket/simple-web dockerhub</a></ul><li>Dockerhub auth token 발급<ul><li><a href="https://docs.docker.com/docker-hub/access-tokens/#create-an-access-token" target="_blank">Create an access token</a><li>github에서 Dockerhub 인증권한을 얻을 수 있도록<br /> Dockerhub access token을 생성한다.</ul><li>github repostiory의 secrets에 Dockerhub access token 등록<ul><li>github repository로 이동.<br /> ex) <a href="https://github.com/a3magic3pocket/simple-web-example" target="_blank">simple-web-example</a><li>(상단 탭) Settings 클릭 <br /> <a href="/assets/img/2023-02-05-cicd-using-git-action-and-dockerhub/00-settings.jpg" target="_blank"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/2023-02-05-cicd-using-git-action-and-dockerhub/00-settings.jpg" width="100%" /></a><li>(좌측 사이드메뉴) Environments 클릭<br /> <a href="/assets/img/2023-02-05-cicd-using-git-action-and-dockerhub/04-rule-environment.jpg" target="_blank"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/2023-02-05-cicd-using-git-action-and-dockerhub/04-rule-environment.jpg" width="100%" /></a><li>“New environment”를 누르고 dockerhub을 등록<li>생성된 “dockerhub” environment를 클릭<li>Add secret 클릭하고<br /> DOCKERHUB_AUTH_TOKEN, DOCKERHUB_USERNAME을 각각 등록 <br /> <a href="/assets/img/2023-02-05-cicd-using-git-action-and-dockerhub/05-add-secret.jpg" target="_blank"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/2023-02-05-cicd-using-git-action-and-dockerhub/05-add-secret.jpg" width="100%" /></a></ul><li>본문<ul><li><div class="language-yml highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
</pre><td class="rouge-code"><pre>        
<span class="c1"># 워크플로 이름</span>
<span class="na">name</span><span class="pi">:</span> <span class="s">Build docker image</span>
      
      
<span class="c1"># 트리거</span>
<span class="na">on</span><span class="pi">:</span>
  <span class="c1"># "simple web example CI" 워크플로가 main 브랜치에서 정상적으로 처리되었다면</span>
  <span class="na">workflow_run</span><span class="pi">:</span>
    <span class="na">workflows</span><span class="pi">:</span> <span class="pi">[</span><span class="s2">"</span><span class="s">simple</span><span class="nv"> </span><span class="s">web</span><span class="nv"> </span><span class="s">example</span><span class="nv"> </span><span class="s">CI"</span><span class="pi">]</span>
    <span class="na">branches</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">main</span><span class="pi">]</span>
    <span class="na">types</span><span class="pi">:</span> 
      <span class="pi">-</span> <span class="s">completed</span>
      
      
<span class="c1"># 작업</span>
<span class="na">jobs</span><span class="pi">:</span>
  <span class="c1"># 작업ID</span>
  <span class="na">push_to_registry</span><span class="pi">:</span>
    <span class="c1"># 환경변수(docker access token을 불러오기 위함)</span>
    <span class="na">environment</span><span class="pi">:</span> <span class="s">dockerhub</span>
      
    <span class="c1"># 작업명</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">Push Docker image to Docker Hub</span>
      
    <span class="c1"># 머신 OS 이미지 선택</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>
      
    <span class="c1"># 워크플로 이벤트가 pull_request이고 워크플로가 성공했다면 아래 스텝 진행</span>
    <span class="na">if</span><span class="pi">:</span> <span class="pi">&gt;</span>
      <span class="s">${{ github.event.workflow_run.event == 'pull_request' &amp;&amp;</span>
      <span class="s">github.event.workflow_run.conclusion == 'success' }}</span>
      
    <span class="c1"># 스탭들</span>
    <span class="na">steps</span><span class="pi">:</span>
      <span class="c1"># github에 있는 소스코드를 CI머신으로 복사</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Check out the repo</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/checkout@v2</span>
              
      <span class="c1"># dockerfile 빌드</span>
      <span class="pi">-</span> <span class="na">uses</span><span class="pi">:</span> <span class="s">docker/setup-buildx-action@v1</span>
      
      <span class="c1"># 도커 로그인 </span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Log in to Docker Hub</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">docker/login-action@v1</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">username</span><span class="pi">:</span> <span class="s">${{ secrets.DOCKERHUB_USERNAME }}</span>
          <span class="na">password</span><span class="pi">:</span> <span class="s">${{ secrets.DOCKERHUB_AUTH_TOKEN }}</span>
      
      <span class="c1"># 태그 추출</span>
      <span class="pi">-</span> <span class="na">run</span><span class="pi">:</span> <span class="s">chmod 775 ./extract-image-tag_linux_amd64</span> 
      <span class="pi">-</span> <span class="na">run</span><span class="pi">:</span> <span class="s">echo "TAG=`./extract-image-tag_linux_amd64 -f simple-web.yml -tu https://hub.docker.com/v2/namespaces/a3magic3pocket/repositories/simple-web/tags`" &gt;&gt; $GITHUB_ENV</span>
      
      <span class="c1"># 추출한 태그를 이용하여 만든 도커이미지를 dockerhub으로 푸시</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Build and push Docker image</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">docker/build-push-action@v2</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">context</span><span class="pi">:</span> <span class="s">.</span>
          <span class="na">push</span><span class="pi">:</span> <span class="no">true</span>
          <span class="na">tags</span><span class="pi">:</span> <span class="s">a3magic3pocket/simple-web:${{ env.TAG }}</span>
          
</pre></table></code></div></div></ul></ul><li>서비스 서버에 Webhook 설치<ul><li>가정<ul><li>서비스 서버에서 docker container 기반으로 서비스를 배포하고 있다고 가정한다.</ul><li>Webhook의 용도<ul><li><a href="https://github.com/adnanh/webhook" target="_blank">adnanh/webhook</a><li>webhook은 역방향 API라고 생각하면 된다.<br /> 무슨일이 있을 때 서버가 클라이언트에게 지정된 URL로 요청을 보낸다.<li>Webhook(adnanh/webhook)은 <br /> 다른 서버의 webhook 요청을 우리 서버에서 받아 처리할 수 있게 하는 작은 웹서버이다.<li>Webhook을 세팅하고 Dockerhub에 webhook URL을 입력하면 Dokcerhub에서 새 이미지가 push 되었을 때 해당 URL로<br /> HTTP요청을 보내게 된다.<li>배포 스크립트는 사용자가 미리 작성해두어야 한다.<li>Webhook이 Dockerhub로부터 요청을 받으면<br /> 지정된 배포 스크립트를 실행하여 배포하게 된다.</ul><li>Webhook 세팅<ul><li><a href="https://a3magic3pocket.github.io/posts/github-webhook/" target="_blank">github webhook을 이용한 원격서버 배포 자동화(AWS)</a><li>위와 같이 설정한다.<br /> 단, webhook을 보내는 서버가 github이 아닌 dockerhub이므로<br /> 본문에서 ‘<a href="https://a3magic3pocket.github.io/posts/github-webhook/#adnanh--webhook" target="_blank">adnanh / webhook</a>’ 부분만 진행하고<br /> ‘<a href="https://a3magic3pocket.github.io/posts/github-webhook/#%EB%B0%B1%EA%B7%B8%EB%9D%BC%EC%9A%B4%EB%93%9C-%EC%8B%A4%ED%96%89" target="_blank">백그라운드 실행</a>‘를 진행하여<br /> Webhook을 실행하고 webhook URL을 얻으면 된다.</ul><li>Webhook URL을 domain으로 접속되게 만들기<ul><li>안타깝게도 Dockerhub에서는 IP 형태의 URL를 webhook URL로 <br /> 입력할 수 없다.<li>webhook URL을 domain 형태로 바꿔야 한다.<ul><li>직접 DNS에 webhook URL 등록하기<ul><li>Webhook의 디폴트 포트는 9000번이다.<li>클라우드 환경이라면 보안그룹에서 9000 포트를<br /> 모든 아이피(0.0.0.0/0)에서 접근 할 수 있도록 개방한다.<li>서비스에서 사용하고 있는 도메인의 DNS에<br /> 9000 포트로 접근할 수 있도록 A record를 추가한다.<br /> ex) webhook.my-domain.com -&gt; 124.121.12.1:9000</ul><li>서비스 서버의 리버스 프록시에 webhook URL 등록하기<ul><li>만약 서비스 서버에서 nginx와 같은 웹서버를<br /> 리버스 프록시로 사용 중이라면<br /> webhook URL을 프록시로 넘겨줄 수 있다.<li>이 경우 nginx 포트로 들어온 요청을 넘기는 것이기 떄문에<br /> 80, 433 포트로 요청이 들어오게 된다.<br /> 그래서 클라우드의 보안그룹을 수정할 필요가 없다.<li>server_name으로 요청을 구분할 경우<br /> ex) webhook.my-domain.com -&gt; localhost:9000<li>path로 요청을 구분할 경우<br /> ex) www.my-domain.com/webhook -&gt; localhost:9000</ul></ul></ul></ul><li>Dockerhub에서 webhook URL 등록<ul><li>방법<ul><li>Dockerhub에 로그인 후 CI / CD로 관리되는 repository로 이동한다.<br /> ex) <a href="https://hub.docker.com/r/a3magic3pocket/simple-web" target="_blank">a3magic3pocket/simple-web - Docker Image | Docker Hub</a><li>‘Manage Repository’를 클릭한다. <br /> <a href="/assets/img/2023-02-05-cicd-using-git-action-and-dockerhub/06-manage-repository.jpg" target="_blank"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/2023-02-05-cicd-using-git-action-and-dockerhub/06-manage-repository.jpg" width="100%" /></a><li>‘Webhooks’를 클릭<li>Webhook name을 적고(아무거나 적어도 된다)<br /> Webhook URL을 입력하고 Create를 누른다.<br /> <a href="/assets/img/2023-02-05-cicd-using-git-action-and-dockerhub/07-webhooks.jpg" target="_blank"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/2023-02-05-cicd-using-git-action-and-dockerhub/07-webhooks.jpg" width="100%" /></a></ul><li>상업용으로 CI / CD 구축 시 고려사항<ul><li>보안을 고려하여 Docker registry 서버는 AWS ECR을 사용하거나<br /> 서버를 따로 만들어 private docker registry를 운영하는 것이 좋을 것 같다.<li>git remote repository로의 의존성을 분리시키고 싶은 경우<br /> jenkins에서 CI / CD를 구축하는 방법도 고려할 수 있다.<li>다만 jenkins는 jenkins 서버를 따로 두어야하므로 <br /> 관리 포인트가 더 늘어난다.<br /> 회사 규모에 따라 ISMS 심사 같은 것을 대비해야 할 경우<br /> 고려해 볼 수 있다.<li>CD도 webhook 외에 다양한 선택지가 있다.<ul><li>jenkins를 쓰는 경우, ssh로 jenkins가 접속하여 직접 스크립트를 실행하는 방법<li>AWS를 쓰는 경우, Code deploy 등을 이용하여 배포하는 방법<li>등등</ul><li>회사 상황에 맞게 적절한 선택을 하면 좋을 것 같다.</ul></ul></ul><h2 id="참고">참고</h2><ul><li><a href="https://docs.github.com/ko/actions/learn-github-actions/understanding-github-actions" target="_blank">GitHub Actions 이해 - GitHub Docs</a><li><a href="https://docs.github.com/ko/actions/using-workflows/events-that-trigger-workflows" target="_blank">워크플로를 트리거하는 이벤트 목록</a><li><a href="https://docs.github.com/ko/actions/using-workflows/workflow-syntax-for-github-actions#choosing-github-hosted-runners" target="_blank">Choosing GitHub-hosted runners 목록</a><li><a href="https://www.redhat.com/ko/topics/devops/what-is-ci-cd" target="_blank">CI/CD(CI CD, 지속적 통합/지속적 배포): 개념, 툴, 구축, 차이 (redhat.com)</a><li><a href="https://www.redhat.com/ko/topics/devops/what-cicd-pipeline" target="_blank">CI/CD 파이프라인: 개념, 방법, 장점, 구현 과정 (redhat.com)</a><li><a href="https://github.com/adnanh/webhook" target="_blank">adnanh/webhook</a><li><a href="https://github.com/marketplace?query=setup+node+" target="_blank">마켓플레이스</a><li><a href="https://github.com/marketplace/actions/setup-node-js-environment" target="_blank">Setup Node.js environment</a><li><a href="https://blog.outsider.ne.kr/1541" target="_blank">풀 리퀘스트 머지 후 테스트 통과하면 도커 이미지 생성하도록 하는 법</a></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/cicd/'>CICD</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/git/" class="post-tag no-text-decoration" >git</a> <a href="/tags/git-action/" class="post-tag no-text-decoration" >git-action</a> <a href="/tags/dockerhub/" class="post-tag no-text-decoration" >dockerhub</a> <a href="/tags/cicd/" class="post-tag no-text-decoration" >cicd</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=git action과 dockerhub을 이용한 CI/CD 파이프라인 구축 - 의사줌치&url=https://a3magic3pocket.github.io/posts/cicd-using-git-action-and-dockerhub/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=git action과 dockerhub을 이용한 CI/CD 파이프라인 구축 - 의사줌치&u=https://a3magic3pocket.github.io/posts/cicd-using-git-action-and-dockerhub/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=git action과 dockerhub을 이용한 CI/CD 파이프라인 구축 - 의사줌치&url=https://a3magic3pocket.github.io/posts/cicd-using-git-action-and-dockerhub/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/kafka-large-scale-event-processing-architecture-and-performance-comparison/">Kafka를 활용한 대용량 이벤트 처리 구조 설계와 성능 비교</a><li><a href="/posts/experimenting-with-blue-green-deployments/">블루 - 그린 배포 실험</a><li><a href="/posts/spring-kafka-latest-message-pub-sub-config/">Spring Kafka에서 최신 메시지만 소비하는 Pub/Sub 방식 설정</a><li><a href="/posts/solving-concurrency-problems-with-performance-in-mind/">동시성 문제 해결 방안 성능 실험</a><li><a href="/posts/exploring-authentication-options/">인증방식 고민</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/kafka/">kafka</a> <a class="post-tag" href="/tags/kotlin/">kotlin</a> <a class="post-tag" href="/tags/elasticsearch/">elasticsearch</a> <a class="post-tag" href="/tags/elk/">elk</a> <a class="post-tag" href="/tags/spring/">spring</a> <a class="post-tag" href="/tags/summary/">summary</a> <a class="post-tag" href="/tags/git/">git</a> <a class="post-tag" href="/tags/kafka-streams/">kafka-streams</a> <a class="post-tag" href="/tags/nest/">nest</a> <a class="post-tag" href="/tags/react/">react</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/docker-swarm-mode-deploy-application/"><div class="card-body"> <span class="timeago small" > Feb 8, 2023 <i class="unloaded">2023-02-08T23:56:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Docker swarm mode을 이용하여 웹 애플리케이션 운영하기</h3><div class="text-muted small"><p> docker swarm mode 란 컨테이너 오케스트레이션 툴이다. 컨테이너 오케이션 툴 배포, 관리, 확장, 네트워킹을 자동화한다. 컨테이너 오케스트레이션이란? 기본적인 환경 설정 docker-compose ...</p></div></div></a></div><div class="card"> <a href="/posts/kubernetes-deploy-application/"><div class="card-body"> <span class="timeago small" > Feb 14, 2023 <i class="unloaded">2023-02-14T00:42:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Kubernetes(minikube)를 이용하여 웹 애플리케이션 운영하기</h3><div class="text-muted small"><p> Kubernetes란 쿠버네티스란 무엇인가? 컨테이너 오케스트레이션 툴이다. 쿠버네티스는 Docker swarm mode와 비슷하나 대규모 애플리케이션에 보다 더 적합하다. Docker Swarm vs Kubernetes: how to choose a container orchestration tool ...</p></div></div></a></div><div class="card"> <a href="/posts/local-git-config/"><div class="card-body"> <span class="timeago small" > Dec 6, 2020 <i class="unloaded">2020-12-06T12:58:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>local git repository에서 git user 세팅</h3><div class="text-muted small"><p> 개요 가끔씩 clone 한 git repo에 user setting이 되지 않아서 원격 repo의 commit 목록에 global user가 노출되는 경우가 있다. 화사 프로젝트 repo와 같이 여러 사람이 같이 쓰는 private repo에서 이런 일이 발생하면 관리자의 따가운 시선을 받을 수 있다. local git repo에서 git...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/elasticsearch-pagination-search-after/" class="btn btn-outline-primary" prompt="Older"><p>search_after를 이용한 pagination(10000개 이상 문서에서 조회)</p></a> <a href="/posts/dynalist-multi-line-code-block/" class="btn btn-outline-primary" prompt="Newer"><p>dynalist 여러 줄 코드 블럭 사용하기(multi line code block)</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://github.com/a3magic3pocket">의사줌치</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/kafka/">kafka</a> <a class="post-tag" href="/tags/kotlin/">kotlin</a> <a class="post-tag" href="/tags/elasticsearch/">elasticsearch</a> <a class="post-tag" href="/tags/elk/">elk</a> <a class="post-tag" href="/tags/spring/">spring</a> <a class="post-tag" href="/tags/summary/">summary</a> <a class="post-tag" href="/tags/git/">git</a> <a class="post-tag" href="/tags/kafka-streams/">kafka streams</a> <a class="post-tag" href="/tags/nest/">nest</a> <a class="post-tag" href="/tags/react/">react</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://a3magic3pocket.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
