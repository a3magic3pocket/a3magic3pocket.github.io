<!DOCTYPE html><html lang="ko-KR" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.0" /><meta property="og:title" content="javascript, 개별 instance를 전역에서 접근할 수 있도록 변경" /><meta property="og:locale" content="ko_KR" /><meta name="description" content="설명 javascript legacy 소스코드 중 class(이하 OldClass)로 처리하고 있는 부분을 발견. OldClass의 특정 method를 다른 js파일(이하 NewFile)에서 호출해야하는 상황 발생. 문제는 OldClass에는 contructor 문이 작성되어 있어 NewFile 내에서 OldClass instance를 생성하기 어려운 상황. OldClass의 해당 method를 뽑아내어 공용 js 파일로 분리시키는 것이 가장 좋으나 의존성 파악이 쉽지 않고 긴급하게 처리해야 하는 경우 OldClass instance를 window 객체에 할당하여 전역으로 접근할 수 있도록 조치하여 해결할 수 있다." /><meta property="og:description" content="설명 javascript legacy 소스코드 중 class(이하 OldClass)로 처리하고 있는 부분을 발견. OldClass의 특정 method를 다른 js파일(이하 NewFile)에서 호출해야하는 상황 발생. 문제는 OldClass에는 contructor 문이 작성되어 있어 NewFile 내에서 OldClass instance를 생성하기 어려운 상황. OldClass의 해당 method를 뽑아내어 공용 js 파일로 분리시키는 것이 가장 좋으나 의존성 파악이 쉽지 않고 긴급하게 처리해야 하는 경우 OldClass instance를 window 객체에 할당하여 전역으로 접근할 수 있도록 조치하여 해결할 수 있다." /><link rel="canonical" href="https://a3magic3pocket.github.io/posts/javascript-instance-inject-window/" /><meta property="og:url" content="https://a3magic3pocket.github.io/posts/javascript-instance-inject-window/" /><meta property="og:site_name" content="의사줌치" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2023-09-26T22:54:58+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="javascript, 개별 instance를 전역에서 접근할 수 있도록 변경" /><meta name="twitter:site" content="@twitter_username" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"description":"설명 javascript legacy 소스코드 중 class(이하 OldClass)로 처리하고 있는 부분을 발견. OldClass의 특정 method를 다른 js파일(이하 NewFile)에서 호출해야하는 상황 발생. 문제는 OldClass에는 contructor 문이 작성되어 있어 NewFile 내에서 OldClass instance를 생성하기 어려운 상황. OldClass의 해당 method를 뽑아내어 공용 js 파일로 분리시키는 것이 가장 좋으나 의존성 파악이 쉽지 않고 긴급하게 처리해야 하는 경우 OldClass instance를 window 객체에 할당하여 전역으로 접근할 수 있도록 조치하여 해결할 수 있다.","url":"https://a3magic3pocket.github.io/posts/javascript-instance-inject-window/","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://a3magic3pocket.github.io/posts/javascript-instance-inject-window/"},"headline":"javascript, 개별 instance를 전역에서 접근할 수 있도록 변경","dateModified":"2024-02-19T12:21:29+09:00","datePublished":"2023-09-26T22:54:58+09:00","@context":"https://schema.org"}</script><title>javascript, 개별 instance를 전역에서 접근할 수 있도록 변경 | 의사줌치</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="의사줌치"><meta name="application-name" content="의사줌치"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script async src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-5NQ41XXW83"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-5NQ41XXW83'); }); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/sample/avatar-crop.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">의사줌치</a></div><div class="site-subtitle font-italic">부정확한 정보를 <br /> 담고 있을 수 있습니다.</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/a3magic3pocket" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" class="order-4" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['a3magic3pocket','gmail.com'].join('@')" aria-label="email" class="order-5" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" class="order-6" > <i class="fas fa-rss"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>javascript, 개별 instance를 전역에서 접근할 수 있도록 변경</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>javascript, 개별 instance를 전역에서 접근할 수 있도록 변경</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> 의사줌치 </span> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Tue, Sep 26, 2023, 10:54 PM +0900" prep="on" > Sep 26, 2023 <i class="unloaded">2023-09-26T22:54:58+09:00</i> </span></div><div> <span> <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Mon, Feb 19, 2024, 12:21 PM +0900" prefix="Updated " > Feb 19, 2024 <i class="unloaded">2024-02-19T12:21:29+09:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="989 words">5 min</span></div></div><div class="post-content"><h2 id="설명">설명</h2><ul><li>javascript legacy 소스코드 중 <br /> class(이하 OldClass)로 처리하고 있는 부분을 발견.<li>OldClass의 특정 method를 <br /> 다른 js파일(이하 NewFile)에서 호출해야하는 상황 발생.<li>문제는 OldClass에는 contructor 문이 작성되어 있어<br /> NewFile 내에서 OldClass instance를 생성하기 어려운 상황.<li>OldClass의 해당 method를 뽑아내어 <br /> 공용 js 파일로 분리시키는 것이 가장 좋으나<br /> 의존성 파악이 쉽지 않고 긴급하게 처리해야 하는 경우<br /> OldClass instance를 window 객체에 할당하여<br /> 전역으로 접근할 수 있도록 조치하여 해결할 수 있다.</ul><h2 id="방법">방법</h2><ul><li>OldClass instance를 window 객체에 할당한다.<div class="language-javascript highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="c1">// old_class.js  </span>
<span class="p">...</span>  
<span class="k">if</span> <span class="p">(</span><span class="nb">window</span><span class="p">)</span> <span class="p">{</span>  
  <span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">DOMContentLoaded</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>  
    <span class="nb">window</span><span class="p">[</span><span class="dl">'</span><span class="s1">OldClass</span><span class="dl">'</span><span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OldClass</span><span class="p">();</span>  
  <span class="p">});</span>  
</pre></table></code></div></div><li>window[‘OldClass’]로 할당하면 OldClass를 로드하고 있는 html이나 <br /> 같은 html 내의 다른 js 파일에서 바로 OldClass instance로 접근할 수 있다.<ul><li>OldClass를 로드하고 있는 html 예시<div class="language-html highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nt">&lt;button</span> <span class="na">onclick=</span><span class="s">"OldClass.SomeClickHandler()"</span><span class="nt">&gt;&lt;/button&gt;</span>  
</pre></table></code></div></div><li>같은 html 내의 다른 js 예시<div class="language-javascript highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="kd">class</span> <span class="nx">NewFile</span> <span class="p">{</span>  
  <span class="kd">constructor</span><span class="p">()</span> <span class="p">{</span>  
    <span class="k">if</span> <span class="p">(</span><span class="nb">window</span> <span class="o">&amp;&amp;</span> <span class="nb">window</span><span class="p">[</span><span class="dl">'</span><span class="s1">OldClass</span><span class="dl">'</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nb">window</span><span class="p">[</span><span class="dl">'</span><span class="s1">OldClass</span><span class="dl">'</span><span class="p">].</span><span class="nx">SomeMethod</span><span class="p">)</span> <span class="p">{</span>  
      <span class="nb">window</span><span class="p">[</span><span class="dl">'</span><span class="s1">OldClass</span><span class="dl">'</span><span class="p">].</span><span class="nx">SomeMethod</span><span class="p">();</span>  
    <span class="p">}</span>  
  <span class="p">}</span>  
<span class="p">}</span>  
</pre></table></code></div></div></ul></ul><h2 id="예시">예시</h2><ul><li>설명<ul><li>글씨색: green, 배경색: pink인 버튼이 있다.<li>OldClass에서는 글씨색을 변경하는 method가 있다.<li>NewFile에서는 배경색을 변경하는 method가 있다.<li>NewFile에서 버튼의 클릭 이벤트 함수를 지정한다.<li>버튼 클릭 시, 버튼을 글씨색:red, 배경색: yellow로 변경할떄<br /> OldClass의 method를 호출하여 글씨색:red를 처리하고자 한다.</ul><li>파일<ul><li>main.html<div class="language-html highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre><td class="rouge-code"><pre><span class="cp">&lt;!DOCTYPE html&gt;</span>  
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">"ko"</span><span class="nt">&gt;</span>  
  <span class="nt">&lt;head&gt;</span>  
    <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"UTF-8"</span> <span class="nt">/&gt;</span>  
    <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"viewport"</span> <span class="na">content=</span><span class="s">"width=device-width, initial-scale=1.0"</span> <span class="nt">/&gt;</span>  
    <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"main.css"</span> <span class="nt">/&gt;</span>  
    <span class="nt">&lt;title&gt;</span>hello world<span class="nt">&lt;/title&gt;</span>  
  <span class="nt">&lt;/head&gt;</span>  
  <span class="nt">&lt;body&gt;</span>  
    <span class="nt">&lt;button</span> <span class="na">id=</span><span class="s">"my-btn"</span> <span class="na">class=</span><span class="s">"color-green bg-color-pink"</span><span class="nt">&gt;</span>  
      <span class="nt">&lt;strong&gt;</span>버튼<span class="nt">&lt;/strong&gt;</span>  
    <span class="nt">&lt;/button&gt;</span>  
                
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"old_class.js"</span><span class="nt">&gt;&lt;/script&gt;</span>  
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"new_file.js"</span><span class="nt">&gt;&lt;/script&gt;</span>  
  <span class="nt">&lt;/body&gt;</span>  
<span class="nt">&lt;/html&gt;</span>  
</pre></table></code></div></div><li>main.css<div class="language-css highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre><td class="rouge-code"><pre><span class="nc">.color-green</span> <span class="p">{</span>  
  <span class="nl">color</span><span class="p">:</span> <span class="no">green</span><span class="p">;</span>  
<span class="p">}</span>  
                
<span class="nc">.color-red</span> <span class="p">{</span>  
  <span class="nl">color</span><span class="p">:</span> <span class="no">red</span><span class="p">;</span>  
<span class="p">}</span>  
                
<span class="nc">.bg-color-pink</span> <span class="p">{</span>  
  <span class="nl">background-color</span><span class="p">:</span> <span class="no">pink</span><span class="p">;</span>  
<span class="p">}</span>  
                
<span class="nc">.bg-color-yellow</span> <span class="p">{</span>  
  <span class="nl">background-color</span><span class="p">:</span> <span class="no">yellow</span><span class="p">;</span>  
<span class="p">}</span>  
</pre></table></code></div></div><li>old_class.js<div class="language-javascript highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
</pre><td class="rouge-code"><pre><span class="kd">class</span> <span class="nx">OldClass</span> <span class="p">{</span>  
  <span class="kd">constructor</span><span class="p">()</span> <span class="p">{</span>  
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Created OldClass instance</span><span class="dl">'</span><span class="p">);</span>  
  <span class="p">}</span>  
                
  <span class="cm">/**  
   * 버튼 글씨색을 빨강으로 변경  
   */</span>  
  <span class="nx">changeBtnColorRed</span><span class="p">()</span> <span class="p">{</span>  
    <span class="kd">const</span> <span class="nx">btnElem</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">#my-btn</span><span class="dl">'</span><span class="p">);</span>  
    <span class="kd">const</span> <span class="nx">colorClassName</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">color-red</span><span class="dl">'</span><span class="p">;</span>  
    <span class="k">this</span><span class="p">.</span><span class="err">#</span><span class="nx">changeColor</span><span class="p">(</span><span class="nx">btnElem</span><span class="p">,</span> <span class="nx">colorClassName</span><span class="p">);</span>  
  <span class="p">}</span>  
                
  <span class="cm">/**  
   * className이 버튼 글씨색 class 인지 확인  
   * @param {string} className   
   * @returns   
   */</span>  
  <span class="err">#</span><span class="nx">checkColorClass</span><span class="p">(</span><span class="nx">className</span><span class="p">)</span> <span class="p">{</span>  
    <span class="k">return</span> <span class="nx">className</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">color-</span><span class="dl">'</span><span class="p">;</span>  
  <span class="p">}</span>  
                
  <span class="cm">/**  
   * elem의 글씨색을 className으로 변경  
   * @param {Element} elem   
   * @param {string} className   
   * @returns {boolean} 변경여부  
   */</span>  
  <span class="err">#</span><span class="nx">changeColor</span><span class="p">(</span><span class="nx">elem</span><span class="p">,</span> <span class="nx">className</span><span class="p">)</span> <span class="p">{</span>  
    <span class="k">if</span> <span class="p">(</span><span class="nx">elem</span> <span class="o">&amp;&amp;</span> <span class="nx">className</span><span class="p">)</span> <span class="p">{</span>  
      <span class="kd">const</span> <span class="nx">isColorClassName</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="err">#</span><span class="nx">checkColorClass</span><span class="p">(</span><span class="nx">className</span><span class="p">);</span>  
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">isColorClassName</span><span class="p">)</span> <span class="p">{</span>  
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>  
      <span class="p">}</span>  
                
      <span class="kd">const</span> <span class="nx">oldClassNames</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">classList</span><span class="p">;</span>  
      <span class="k">for</span> <span class="p">(</span><span class="kd">const</span> <span class="nx">oldClassName</span> <span class="k">of</span> <span class="nx">oldClassNames</span><span class="p">)</span> <span class="p">{</span>  
        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">checkColorClass</span><span class="p">(</span><span class="nx">oldClassName</span><span class="p">))</span> <span class="p">{</span>  
          <span class="nx">elem</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="nx">oldClassName</span><span class="p">);</span>  
        <span class="p">}</span>  
      <span class="p">}</span>  
                
      <span class="nx">elem</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">className</span><span class="p">);</span>  
                
      <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>  
    <span class="p">}</span>  
                
    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>  
  <span class="p">}</span>  
<span class="p">}</span>  
                
<span class="k">if</span> <span class="p">(</span><span class="nb">window</span><span class="p">)</span> <span class="p">{</span>  
  <span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">DOMContentLoaded</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>  
    <span class="nb">window</span><span class="p">[</span><span class="dl">'</span><span class="s1">OldClass</span><span class="dl">'</span><span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OldClass</span><span class="p">();</span>  
  <span class="p">});</span>  
<span class="p">}</span>  
</pre></table></code></div></div><li>new_file.js<div class="language-javascript highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
</pre><td class="rouge-code"><pre><span class="kd">class</span> <span class="nx">NewFile</span> <span class="p">{</span>  
  <span class="kd">constructor</span><span class="p">()</span> <span class="p">{</span>  
    <span class="k">this</span><span class="p">.</span><span class="nx">handleBtnClick</span><span class="p">();</span>  
  <span class="p">}</span>  
                
  <span class="cm">/**  
   * 버튼이 눌렸을 때 동작을 지정  
   */</span>  
  <span class="nx">handleBtnClick</span><span class="p">()</span> <span class="p">{</span>  
    <span class="kd">const</span> <span class="nx">btnElem</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">#my-btn</span><span class="dl">'</span><span class="p">);</span>  
    <span class="nx">btnElem</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">click</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>  
      <span class="k">this</span><span class="p">.</span><span class="nx">changeBtnColorRedAndBgColorYellow</span><span class="p">();</span>  
    <span class="p">});</span>  
  <span class="p">}</span>  
                
  <span class="cm">/**  
   * 버튼의 글씨색을 빨강으로  
   * 배경색을 노랑으로 변경  
   */</span>  
  <span class="nx">changeBtnColorRedAndBgColorYellow</span><span class="p">()</span> <span class="p">{</span>  
    <span class="kd">const</span> <span class="nx">btnElem</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">#my-btn</span><span class="dl">'</span><span class="p">);</span>  
    <span class="kd">const</span> <span class="nx">bgColorClassName</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">bg-color-yellow</span><span class="dl">'</span><span class="p">;</span>  
    <span class="k">this</span><span class="p">.</span><span class="err">#</span><span class="nx">changeBgColor</span><span class="p">(</span><span class="nx">btnElem</span><span class="p">,</span> <span class="nx">bgColorClassName</span><span class="p">);</span>  
    <span class="k">if</span> <span class="p">(</span><span class="nb">window</span> <span class="o">&amp;&amp;</span> <span class="nb">window</span><span class="p">[</span><span class="dl">'</span><span class="s1">First</span><span class="dl">'</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nb">window</span><span class="p">[</span><span class="dl">'</span><span class="s1">First</span><span class="dl">'</span><span class="p">].</span><span class="nx">changeColor</span><span class="p">)</span> <span class="p">{</span>  
      <span class="nb">window</span><span class="p">[</span><span class="dl">'</span><span class="s1">First</span><span class="dl">'</span><span class="p">].</span><span class="nx">changeBtnColorRed</span><span class="p">();</span>  
    <span class="p">}</span>  
  <span class="p">}</span>  
                
  <span class="cm">/**  
   * className이 배경색을 변경하는 class인지 확인  
   * @param {*} className   
   * @returns   
   */</span>  
  <span class="err">#</span><span class="nx">checkBgColorClass</span><span class="p">(</span><span class="nx">className</span><span class="p">)</span> <span class="p">{</span>  
    <span class="k">return</span> <span class="nx">className</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">bg-color-</span><span class="dl">'</span><span class="p">;</span>  
  <span class="p">}</span>  
                
  <span class="cm">/**  
   * elem의 배경색을 className으로 변경  
   * @param {Element} elem   
   * @param {string} className   
   * @returns {boolean} 변경여부  
   */</span>  
  <span class="err">#</span><span class="nx">changeBgColor</span><span class="p">(</span><span class="nx">elem</span><span class="p">,</span> <span class="nx">className</span><span class="p">)</span> <span class="p">{</span>  
    <span class="k">if</span> <span class="p">(</span><span class="nx">elem</span> <span class="o">&amp;&amp;</span> <span class="nx">className</span><span class="p">)</span> <span class="p">{</span>  
      <span class="kd">const</span> <span class="nx">isBgColorClassName</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="err">#</span><span class="nx">checkBgColorClass</span><span class="p">(</span><span class="nx">className</span><span class="p">);</span>  
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">isBgColorClassName</span><span class="p">)</span> <span class="p">{</span>  
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>  
      <span class="p">}</span>  
                
      <span class="kd">const</span> <span class="nx">oldClassNames</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">classList</span><span class="p">;</span>  
      <span class="k">for</span> <span class="p">(</span><span class="kd">const</span> <span class="nx">oldClassName</span> <span class="k">of</span> <span class="nx">oldClassNames</span><span class="p">)</span> <span class="p">{</span>  
        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="err">#</span><span class="nx">checkBgColorClass</span><span class="p">(</span><span class="nx">oldClassName</span><span class="p">))</span> <span class="p">{</span>  
          <span class="nx">elem</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="nx">oldClassName</span><span class="p">);</span>  
        <span class="p">}</span>  
      <span class="p">}</span>  
                
      <span class="nx">elem</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">className</span><span class="p">);</span>  
                
      <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>  
    <span class="p">}</span>  
                
    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>  
  <span class="p">}</span>  
<span class="p">}</span>  
                
<span class="k">if</span> <span class="p">(</span><span class="nb">window</span><span class="p">)</span> <span class="p">{</span>  
  <span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">DOMContentLoaded</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>  
    <span class="nb">window</span><span class="p">[</span><span class="dl">'</span><span class="s1">NewFile</span><span class="dl">'</span><span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NewFile</span><span class="p">();</span>  
  <span class="p">});</span>  
<span class="p">}</span>  
</pre></table></code></div></div></ul><li>최초화면<ul><li><a href="/assets/img/2023-09-26-javascript-instance-inject-window/00-initial.jpg" target="_blank"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/2023-09-26-javascript-instance-inject-window/00-initial.jpg" width="80%" height="80%" /></a></ul><li>클릭 후 결과<ul><li><a href="/assets/img/2023-09-26-javascript-instance-inject-window/01-after.jpg" target="_blank"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/2023-09-26-javascript-instance-inject-window/01-after.jpg" width="80%" height="80%" /></a></ul></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/javascript/'>Javascript</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/javascript/" class="post-tag no-text-decoration" >javascript</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=javascript, 개별 instance를 전역에서 접근할 수 있도록 변경 - 의사줌치&url=https://a3magic3pocket.github.io/posts/javascript-instance-inject-window/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=javascript, 개별 instance를 전역에서 접근할 수 있도록 변경 - 의사줌치&u=https://a3magic3pocket.github.io/posts/javascript-instance-inject-window/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=javascript, 개별 instance를 전역에서 접근할 수 있도록 변경 - 의사줌치&url=https://a3magic3pocket.github.io/posts/javascript-instance-inject-window/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/kafka-large-scale-event-processing-architecture-and-performance-comparison/">Kafka를 활용한 대용량 이벤트 처리 구조 설계와 성능 비교</a><li><a href="/posts/experimenting-with-blue-green-deployments/">블루 - 그린 배포 실험</a><li><a href="/posts/spring-kafka-latest-message-pub-sub-config/">Spring Kafka에서 최신 메시지만 소비하는 Pub/Sub 방식 설정</a><li><a href="/posts/solving-concurrency-problems-with-performance-in-mind/">동시성 문제 해결 방안 성능 실험</a><li><a href="/posts/exploring-authentication-options/">인증방식 고민</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/kafka/">kafka</a> <a class="post-tag" href="/tags/kotlin/">kotlin</a> <a class="post-tag" href="/tags/elasticsearch/">elasticsearch</a> <a class="post-tag" href="/tags/elk/">elk</a> <a class="post-tag" href="/tags/spring/">spring</a> <a class="post-tag" href="/tags/summary/">summary</a> <a class="post-tag" href="/tags/git/">git</a> <a class="post-tag" href="/tags/kafka-streams/">kafka-streams</a> <a class="post-tag" href="/tags/nest/">nest</a> <a class="post-tag" href="/tags/react/">react</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/allow-node-private-firewall/"><div class="card-body"> <span class="timeago small" > May 28, 2021 <i class="unloaded">2021-05-28T19:00:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>노드 개발 서버 모바일에서 접속하기(in windows)</h3><div class="text-muted small"><p> 개요 노드로 웹 서버를 실행하고 같은 네트워크에 있는 모바일 디바이스로 접속하니 접속 실패하였다. 모바일에서 localhost 접속(in windows) 방법대로 했으나 되지 않았다. 혹시나 하여 golang으로 웹 서버를 실행하고 똑같이 모바일 디바이스로 접속해보니 된다. 원인은 node 자체에서 추가한 방화벽 규칙이 있었고, 이 방...</p></div></div></a></div><div class="card"> <a href="/posts/js-unicode-regex/"><div class="card-body"> <span class="timeago small" > May 25, 2021 <i class="unloaded">2021-05-25T18:50:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>자바스크립트 정규식에서 유니코드 다루기</h3><div class="text-muted small"><p> 개요 프론트에서 input에 4byte 이모지 입력을 막기 위해 정규식 적용하여 이를 기록한다. 자바스크립트 정규식 플래그 자바스크립트에서 정규식을 쓸 때, 정규식 문 마지막 슬래쉬(/) 뒤에 플래그를 붙일 수 있다. 플래그 g 전역 검색 i...</p></div></div></a></div><div class="card"> <a href="/posts/apply-innerHTML-in-label-tag/"><div class="card-body"> <span class="timeago small" > Jun 18, 2021 <i class="unloaded">2021-06-18T17:15:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Label 태그에 개행(newLine) 넣기</h3><div class="text-muted small"><p> 개요 Label 태그에 개행을 넣은 경험을 기록한다. gonic-gin으로 환경을 만들어 실험환경을 구축한다. js를 통해 문제를 해결한다. Label 태그 Input 태그를 설명하는 문자열이 필요한 경우, Label 태그에 넣어 추가한다. Label 태그 사용법 Label 태그의 for attribute에...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/nginx-aws-cloudfront-reverse-proxy-error/" class="btn btn-outline-primary" prompt="Older"><p>nginx, AWS cloudfront로 리버스 프록시 설정 에러</p></a> <a href="/posts/how-to-use-react-portal/" class="btn btn-outline-primary" prompt="Newer"><p>juqery library element에 React component 연동하기(react portal)</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://github.com/a3magic3pocket">의사줌치</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/kafka/">kafka</a> <a class="post-tag" href="/tags/kotlin/">kotlin</a> <a class="post-tag" href="/tags/elasticsearch/">elasticsearch</a> <a class="post-tag" href="/tags/elk/">elk</a> <a class="post-tag" href="/tags/spring/">spring</a> <a class="post-tag" href="/tags/summary/">summary</a> <a class="post-tag" href="/tags/git/">git</a> <a class="post-tag" href="/tags/kafka-streams/">kafka streams</a> <a class="post-tag" href="/tags/nest/">nest</a> <a class="post-tag" href="/tags/react/">react</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://a3magic3pocket.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
