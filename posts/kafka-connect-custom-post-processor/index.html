<!DOCTYPE html><html lang="ko-KR" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.0" /><meta property="og:title" content="카프카 커넥트(kafka connect), Custom Post Processor 만들기" /><meta property="og:locale" content="ko_KR" /><meta name="description" content="개요 카프카 스트림에서 string 타입으로 저장된 ID 값을 mongoDB sink connector에 저장할때 objectID 타입으로 저장하고 싶다. mongoDB sink connector의 Custom Post Processor를 만들어서 해결하였다. [참고1 - How to convert a String field to ObjectId in MongoSinkConnector]" /><meta property="og:description" content="개요 카프카 스트림에서 string 타입으로 저장된 ID 값을 mongoDB sink connector에 저장할때 objectID 타입으로 저장하고 싶다. mongoDB sink connector의 Custom Post Processor를 만들어서 해결하였다. [참고1 - How to convert a String field to ObjectId in MongoSinkConnector]" /><link rel="canonical" href="https://a3magic3pocket.github.io/posts/kafka-connect-custom-post-processor/" /><meta property="og:url" content="https://a3magic3pocket.github.io/posts/kafka-connect-custom-post-processor/" /><meta property="og:site_name" content="의사줌치" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2024-04-05T14:34:13+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="카프카 커넥트(kafka connect), Custom Post Processor 만들기" /><meta name="twitter:site" content="@twitter_username" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"description":"개요 카프카 스트림에서 string 타입으로 저장된 ID 값을 mongoDB sink connector에 저장할때 objectID 타입으로 저장하고 싶다. mongoDB sink connector의 Custom Post Processor를 만들어서 해결하였다. [참고1 - How to convert a String field to ObjectId in MongoSinkConnector]","url":"https://a3magic3pocket.github.io/posts/kafka-connect-custom-post-processor/","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://a3magic3pocket.github.io/posts/kafka-connect-custom-post-processor/"},"headline":"카프카 커넥트(kafka connect), Custom Post Processor 만들기","dateModified":"2024-04-08T18:34:45+09:00","datePublished":"2024-04-05T14:34:13+09:00","@context":"https://schema.org"}</script><title>카프카 커넥트(kafka connect), Custom Post Processor 만들기 | 의사줌치</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="의사줌치"><meta name="application-name" content="의사줌치"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script async src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-5NQ41XXW83"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-5NQ41XXW83'); }); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/sample/avatar-crop.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">의사줌치</a></div><div class="site-subtitle font-italic">부정확한 정보를 <br /> 담고 있을 수 있습니다.</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/a3magic3pocket" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" class="order-4" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['a3magic3pocket','gmail.com'].join('@')" aria-label="email" class="order-5" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" class="order-6" > <i class="fas fa-rss"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>카프카 커넥트(kafka connect), Custom Post Processor 만들기</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>카프카 커넥트(kafka connect), Custom Post Processor 만들기</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> 의사줌치 </span> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Fri, Apr 5, 2024, 2:34 PM +0900" prep="on" > Apr 5, 2024 <i class="unloaded">2024-04-05T14:34:13+09:00</i> </span></div><div> <span> <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Mon, Apr 8, 2024, 6:34 PM +0900" prefix="Updated " > Apr 8, 2024 <i class="unloaded">2024-04-08T18:34:45+09:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1595 words">8 min</span></div></div><div class="post-content"><h2 id="개요">개요</h2><ul><li>카프카 스트림에서 string 타입으로 저장된 ID 값을<br /> mongoDB sink connector에 저장할때 objectID 타입으로 저장하고 싶다.<li>mongoDB sink connector의 Custom Post Processor를 만들어서<br /> 해결하였다.<li>[<a href="https://www.mongodb.com/community/forums/t/how-to-convert-a-string-field-to-objectid-in-mongosinkconnector/108324/6" target="_blank">참고1 - How to convert a String field to ObjectId in MongoSinkConnector</a>]</ul><h2 id="post-processor">Post Processor</h2><ul><li>설명<ul><li>[<a href="https://www.mongodb.com/docs/kafka-connector/current/sink-connector/fundamentals/post-processors/#how-to-create-a-custom-post-processor" target="_blank">참고2 - How to Create a Custom Post Processor</a>]<li>Custom Post Processor는 sink connector의 plugin으로 처리된다.<li><a href="https://github.com/mongodb/mongo-kafka/blob/master/src/main/java/com/mongodb/kafka/connect/sink/processor/PostProcessor.java" target="_blank">mongoDB Sink Connector PostProcessor.java</a>을 <br /> 상속 받는 클래스를 생성한 후<br /> process() 메소드에 원하는 로직을 입력하여 만든다.<br /> 예시에서는 sinkPostProcessor 패키지의 ObjectIdPostProcessor 클래스로 가정한다.<li>작성한 ObjectIdPostProcessor .java를<br /> class로 빌드 후 jar 파일로 만든다.<li>이후 mongoDB sink connector plugin 디렉토리에 jar를 이동시킨다.<li>Sink Connector 생성 명령에서 ObjectIdPostProcessor를 추가한다.<div class="language-json highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="p">{</span><span class="w">  
    </span><span class="err">...</span><span class="w">  
    </span><span class="nl">"post.processor.chain"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sinkPostProcessor.ObjectIdPostProcessor"</span><span class="p">,</span><span class="w">  
    </span><span class="nl">"value.projection.list"</span><span class="p">:</span><span class="w"> </span><span class="s2">"id"</span><span class="w">  
</span><span class="p">}</span><span class="w">  
</span></pre></table></code></div></div></ul></ul><h2 id="카프카-카프카-스트림-카프카-커넥트-설정">카프카, 카프카 스트림, 카프카 커넥트 설정</h2><ul><li>기본적으로 아래 링크와 동일한 설정이며<br /> 앞으로의 내용은 변경된 부분을 주로 서술한다.<li><a href="https://a3magic3pocket.github.io/posts/write-kafka-stream-to-mongodb-using-kafka-connect/#%EC%B9%B4%ED%94%84%EC%B9%B4-%EC%84%A4%EC%A0%95" target="_blank">카프카 커넥트(kafka connect)로 mongoDB에 카프카 스트림 쓰기</a></ul><h2 id="트러블-슈팅1---java-version">트러블 슈팅1 - java version</h2><ul><li>설명<ul><li>ObjectIdPostProcessor 클래스는 mongoDB sink connector의<br /> 자바 버전과 동일한 자바 버전에서 컴파일 되어야 한다.<li>그렇지 않으면 아래와 같은 아래가 발생한다.<br /> 2024-04-04 10:42:51 Caused by: java.lang.UnsupportedClassVersionError: com/myapp/streams/ObjectIdPostProcessor has been compiled by a more recent version of the Java Runtime (class file version 65.0), this version of the Java Runtime only recognizes class file versions up to 55.0<li>내 작업 환경에서는 jdk 21을 사용 중이었으나 <br /> mongoDB sink connector가 설치된<br /> confluentinc/cp-kafka-connect:7.6.0 이미지는 <br /> jdk11을 사용 중인 것으로 추정된다[<a href="https://stackoverflow.com/questions/9170832/list-of-java-class-file-format-major-version-numbers" target="_blank">참고3</a>].<li>OpenJdk 11을 설치하고 “트러블 슈팅2”로 넘어간다.<br /> [<a href="https://jdk.java.net/java-se-ri/11-MR2" target="_blank">참고4</a>]</ul></ul><h2 id="트러블-슈팅2---이클립스-그래들-프로젝트-생성">트러블 슈팅2 - 이클립스 그래들 프로젝트 생성</h2><ul><li>설명<ul><li><a href="https://github.com/mongodb/mongo-kafka/blob/master/src/main/java/com/mongodb/kafka/connect/sink/processor/PostProcessor.java" target="_blank">mongoDB Sink Connector PostProcessor.java</a>에는 <br /> 의존성 패키지들이 존재한다.<li>ObjectIdPostProcessor 빌드 시 <br /> 의존성 패키지들도 함께 처리해주기 위해<br /> 이클립스 그래들 프로젝트를 생성하고<br /> 기본 compiler를 java 11로 변경한다.<li>[<a href="https://jiurinie.tistory.com/123" target="_blank">참고5</a>][<a href="https://chinsun9.github.io/2020/10/05/gradle/" target="_blank">참고6</a>]</ul><li>이클립스에 그래들 설치<ul><li>(상단 메뉴)Help &gt; Eclipse Marketplace &gt; gradle 검색 후 <br /> Buildship Gradle Integration 3.0 설치<li><a href="/assets/img/2024-04-05-kafka-connect-custom-post-processor/00-marketplace-gradle.jpg" target="_blank"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/2024-04-05-kafka-connect-custom-post-processor/00-marketplace-gradle.jpg" width="80%" height="80%" /></a></ul><li>그래들 프로젝트 생성<ul><li>(상단 메뉴)File &gt; New &gt; Project…(Ctrl + N)로 New Project 팝업 생성<li><a href="/assets/img/2024-04-05-kafka-connect-custom-post-processor/01-new-project.jpg" target="_blank"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/2024-04-05-kafka-connect-custom-post-processor/01-new-project.jpg" width="80%" height="80%" /></a><li><a href="/assets/img/2024-04-05-kafka-connect-custom-post-processor/02-new-project2.jpg" target="_blank"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/2024-04-05-kafka-connect-custom-post-processor/02-new-project2.jpg" width="80%" height="80%" /></a><li><a href="/assets/img/2024-04-05-kafka-connect-custom-post-processor/03-new-project3.jpg" target="_blank"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/2024-04-05-kafka-connect-custom-post-processor/03-new-project3.jpg" width="80%" height="80%" /></a><ul><li>gradle 버전: 7.4.2를 선택<li>Java home: jdk11 디렉토리 선택</ul></ul><li>컴파일러 버전 변경<ul><li>(상단 메뉴)Window &gt; Preferences &gt; <br /> compiler 검색 후 Java Compiler 선택,<br /> Compiler compliance level 11로 변경</ul></ul><h2 id="objectidpostprocessor-코드">ObjectIdPostProcessor 코드</h2><ul><li>설명<ul><li>mongoDB sink connector 생성 명령에서<br /> value.projection.list에 입력된 필드명(쉼표 구분 comma separated)을 <br /> 읽어 들인다.<li>카프카 메세지에서 해당 필드의 값(field value)를<br /> BsonObjectID 타입으로 변경 후 저장한다.</ul><li>의존성 패키지<div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre>compileOnly <span class="s1">'org.mongodb.kafka:mongo-kafka-connect:1.11.2'</span>  
compileOnly <span class="s1">'org.apache.kafka:connect-api:3.7.0'</span>  
compileOnly <span class="s1">'org.mongodb:bson:3.3.0'</span>  
compileOnly <span class="s1">'org.slf4j:slf4j-api:1.7.25'</span>  
</pre></table></code></div></div><li>sinkPostProcessor/ObjectIdPostProcessor.java<div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
</pre><td class="rouge-code"><pre><span class="kn">package</span> <span class="nn">sinkPostProcessor</span><span class="o">;</span>  
            
<span class="kn">import</span> <span class="nn">org.bson.types.ObjectId</span><span class="o">;</span>  
            
<span class="kn">import</span> <span class="nn">org.apache.kafka.connect.sink.SinkRecord</span><span class="o">;</span>  
<span class="kn">import</span> <span class="nn">org.bson.BsonObjectId</span><span class="o">;</span>  
            
<span class="kn">import</span> <span class="nn">org.slf4j.Logger</span><span class="o">;</span>  
<span class="kn">import</span> <span class="nn">org.slf4j.LoggerFactory</span><span class="o">;</span>  
            
<span class="kn">import</span> <span class="nn">com.mongodb.kafka.connect.sink.MongoSinkTopicConfig</span><span class="o">;</span>  
<span class="kn">import</span> <span class="nn">com.mongodb.kafka.connect.sink.converter.SinkDocument</span><span class="o">;</span>  
<span class="kn">import</span> <span class="nn">com.mongodb.kafka.connect.sink.processor.PostProcessor</span><span class="o">;</span>  
            
<span class="kn">import</span> <span class="nn">static</span> <span class="n">com</span><span class="o">.</span><span class="na">mongodb</span><span class="o">.</span><span class="na">kafka</span><span class="o">.</span><span class="na">connect</span><span class="o">.</span><span class="na">sink</span><span class="o">.</span><span class="na">MongoSinkTopicConfig</span><span class="o">.</span><span class="na">VALUE_PROJECTION_LIST_CONFIG</span><span class="o">;</span>  
            
<span class="kn">import</span> <span class="nn">java.util.ArrayList</span><span class="o">;</span>  
<span class="kn">import</span> <span class="nn">java.util.Arrays</span><span class="o">;</span>  
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>  
            
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ObjectIdPostProcessor</span> <span class="kd">extends</span> <span class="nc">PostProcessor</span> <span class="o">{</span>  
	<span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">Logger</span> <span class="no">LOGGER</span> <span class="o">=</span> <span class="nc">LoggerFactory</span><span class="o">.</span><span class="na">getLogger</span><span class="o">(</span><span class="nc">PostProcessor</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>  
	<span class="kd">private</span> <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">fieldNames</span><span class="o">;</span>  
            
	<span class="kd">public</span> <span class="nf">ObjectIdPostProcessor</span><span class="o">(</span><span class="kd">final</span> <span class="nc">MongoSinkTopicConfig</span> <span class="n">config</span><span class="o">)</span> <span class="o">{</span>  
		<span class="kd">super</span><span class="o">(</span><span class="n">config</span><span class="o">);</span>  
		<span class="nc">String</span> <span class="n">rawFields</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="no">VALUE_PROJECTION_LIST_CONFIG</span><span class="o">);</span>  
		<span class="n">fieldNames</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;(</span><span class="nc">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="n">rawFields</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="s">","</span><span class="o">)));</span>  
	<span class="o">}</span>  
            
	<span class="nd">@Override</span>  
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">process</span><span class="o">(</span><span class="kd">final</span> <span class="nc">SinkDocument</span> <span class="n">doc</span><span class="o">,</span> <span class="kd">final</span> <span class="nc">SinkRecord</span> <span class="n">orig</span><span class="o">)</span> <span class="o">{</span>  
		<span class="n">doc</span><span class="o">.</span><span class="na">getValueDoc</span><span class="o">().</span><span class="na">ifPresent</span><span class="o">(</span><span class="n">vd</span> <span class="o">-&gt;</span> <span class="o">{</span>  
			<span class="k">for</span> <span class="o">(</span><span class="nc">String</span> <span class="n">fieldName</span> <span class="o">:</span> <span class="n">fieldNames</span><span class="o">)</span> <span class="o">{</span>  
				<span class="k">if</span> <span class="o">(</span><span class="n">vd</span><span class="o">.</span><span class="na">containsKey</span><span class="o">(</span><span class="n">fieldName</span><span class="o">))</span> <span class="o">{</span>  
					<span class="nc">String</span> <span class="n">hash</span> <span class="o">=</span> <span class="n">vd</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="n">fieldName</span><span class="o">).</span><span class="na">getValue</span><span class="o">();</span>  
<span class="c1">//					LOGGER.warn("+++" + hash);  </span>
  					  
					<span class="n">vd</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">fieldName</span><span class="o">,</span> <span class="k">new</span> <span class="nc">BsonObjectId</span><span class="o">(</span><span class="k">new</span> <span class="nc">ObjectId</span><span class="o">(</span><span class="n">hash</span><span class="o">)));</span>  
				<span class="o">}</span>  
			<span class="o">}</span>  
		<span class="o">});</span>  
	<span class="o">}</span>  
            
<span class="o">}</span>  
            
</pre></table></code></div></div></ul><h2 id="트러블-슈팅3---objectidpostprocessorjava를-jar-파일로-추출">트러블 슈팅3 - ObjectIdPostProcessor.java를 jar 파일로 추출</h2><ul><li>ObjectIdPostProcessor.java 우클릭 &gt; Export 선택<br /> <a href="/assets/img/2024-04-05-kafka-connect-custom-post-processor/04-extract-jar.jpg" target="_blank"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/2024-04-05-kafka-connect-custom-post-processor/04-extract-jar.jpg" width="80%" height="80%" /></a><li>JAR file 선택<br /> <a href="/assets/img/2024-04-05-kafka-connect-custom-post-processor/05-extract-jar2.jpg" target="_blank"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/2024-04-05-kafka-connect-custom-post-processor/05-extract-jar2.jpg" width="80%" height="80%" /></a><li>패지키(sinkPostProcessor) 선택 후 ObjectIdPostProcessor.java 선택,<br /> jar 파일 경로를 mongoDB Sink Connector plugin 경로 하위로 선택<br /> <a href="/assets/img/2024-04-05-kafka-connect-custom-post-processor/06-extract-jar3.jpg" target="_blank"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/2024-04-05-kafka-connect-custom-post-processor/06-extract-jar3.jpg" width="80%" height="80%" /></a><li>mongoDB Sink Connector plugin 경로란?<ul><li>docker-compose.yml 예시<div class="language-yml highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
</pre><td class="rouge-code"><pre><span class="c1"># Use root/example as user/password credentials  </span>
<span class="na">version</span><span class="pi">:</span> <span class="s1">'</span><span class="s">3.8'</span>  
                
<span class="na">services</span><span class="pi">:</span>  
  <span class="na">kafka</span><span class="pi">:</span>  
    <span class="s">...</span>  
                
  <span class="na">mongo</span><span class="pi">:</span>  
    <span class="s">...</span>  
                
  <span class="na">kafka-connect</span><span class="pi">:</span>  
      <span class="na">image</span><span class="pi">:</span> <span class="s">confluentinc/cp-kafka-connect:7.6.0</span>  
      <span class="na">ports</span><span class="pi">:</span>  
        <span class="pi">-</span> <span class="s">8083:8083</span>  
      <span class="na">depends_on</span><span class="pi">:</span>  
        <span class="pi">-</span> <span class="s">kafka</span>  
        <span class="pi">-</span> <span class="s">mongo</span>  
      <span class="na">environment</span><span class="pi">:</span>  
        <span class="na">CONNECT_BOOTSTRAP_SERVERS</span><span class="pi">:</span> <span class="s">broker:19092</span>  
        <span class="na">CONNECT_REST_PORT</span><span class="pi">:</span> <span class="s">8083</span>  
        <span class="na">CONNECT_GROUP_ID</span><span class="pi">:</span> <span class="s2">"</span><span class="s">quickstart-avro"</span>  
        <span class="na">CONNECT_CONFIG_STORAGE_TOPIC</span><span class="pi">:</span> <span class="s2">"</span><span class="s">quickstart-avro-config"</span>  
        <span class="na">CONNECT_OFFSET_STORAGE_TOPIC</span><span class="pi">:</span> <span class="s2">"</span><span class="s">quickstart-avro-offsets"</span>  
        <span class="na">CONNECT_STATUS_STORAGE_TOPIC</span><span class="pi">:</span> <span class="s2">"</span><span class="s">quickstart-avro-status"</span>  
        <span class="na">CONNECT_CONFIG_STORAGE_REPLICATION_FACTOR</span><span class="pi">:</span> <span class="s">1</span>  
        <span class="na">CONNECT_OFFSET_STORAGE_REPLICATION_FACTOR</span><span class="pi">:</span> <span class="s">1</span>  
        <span class="na">CONNECT_STATUS_STORAGE_REPLICATION_FACTOR</span><span class="pi">:</span> <span class="s">1</span>  
        <span class="na">CONNECT_KEY_CONVERTER</span><span class="pi">:</span> <span class="s2">"</span><span class="s">org.apache.kafka.connect.json.JsonConverter"</span>  
        <span class="na">CONNECT_VALUE_CONVERTER</span><span class="pi">:</span> <span class="s2">"</span><span class="s">org.apache.kafka.connect.json.JsonConverter"</span>  
        <span class="na">CONNECT_INTERNAL_KEY_CONVERTER</span><span class="pi">:</span> <span class="s2">"</span><span class="s">org.apache.kafka.connect.json.JsonConverter"</span>  
        <span class="na">CONNECT_INTERNAL_VALUE_CONVERTER</span><span class="pi">:</span> <span class="s2">"</span><span class="s">org.apache.kafka.connect.json.JsonConverter"</span>  
        <span class="na">CONNECT_REST_ADVERTISED_HOST_NAME</span><span class="pi">:</span> <span class="s2">"</span><span class="s">localhost"</span>  
        <span class="na">CONNECT_LOG4J_ROOT_LOGLEVEL</span><span class="pi">:</span> <span class="s">WARN</span>  
        <span class="na">CONNECT_PLUGIN_PATH</span><span class="pi">:</span> <span class="s2">"</span><span class="s">/usr/share/java,/etc/kafka-connect/jars"</span>  
      <span class="na">volumes</span><span class="pi">:</span>  
        <span class="pi">-</span> <span class="s">./kafka-connect/jars:/etc/kafka-connect/jars</span>  
</pre></table></code></div></div><li>CONNECT_PLUGIN_PATH와 연결된 ./kafka-connect/jars가<br /> mongoDB Sink Connector plugin 경로이다.<li>[<a href="https://bioinfoblog.tistory.com/242" target="_blank">참고7</a>]</ul></ul><h2 id="objectidpostprocessor-사용하기">ObjectIdPostProcessor 사용하기</h2><ul><li>mongoDB Sink Connector 재실행<ul><li>ObjectIdPostProcessor.jar를 인식시키기 위하여<br /> kafka-connect 컨테이너를 재시작한다.</ul><li>sink connector 생성 명령<ul><li>설명<ul><li>post.processor.chain에 삽입할 Custom Post Processor를 입력한다.<br /> ex) “post.processor.chain”: “sinkPostProcessor.ObjectIdPostProcessor”<li>value.projection.list에 대상 필드명을 콤마 구분하여 입력한다.<br /> ex) “value.projection.list”: “id,target-id”<li>!주의 - PartialValueStrategy 사용불가<br /> ObjectIdPostProcessor의 대상 필드가 PartialValueStrategy 일 경우<br /> writeModel을 ReplaceOneBusinessKeyStrategy로 지정하여도<br /> 같은 키를 가진 문서가 갱신되지 않고 추가만 된다.<br /> 키로 사용되지 않는 필드를 추가하거나 <br /> FullKeyStrategy를 사용하여 대응할 수 있다.<br /> [<a href="https://a3magic3pocket.github.io/posts/mongodb-sink-connector-fullkeystrategy/" target="_blank">참고8</a>]</ul><li>명령<div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
</pre><td class="rouge-code"><pre>curl <span class="nt">--location</span> <span class="s1">'http://localhost:8083/connectors'</span> <span class="se">\ </span> 
<span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\ </span> 
<span class="nt">--data-raw</span> <span class="s1">'{  
    "name": "mongo-sink-user",  
    "config": {  
        "connector.class": "com.mongodb.kafka.connect.MongoSinkConnector",  
        "connection.uri": "mongodb://mongodbuser:mongodbpw@mongo:27017/",  
        "tasks.max": "1",  
        "topics": "user-result",  
        "database": "my-database",  
        "collection": "user",  
        "key.converter": "org.apache.kafka.connect.storage.StringConverter",  
        "value.converter": "org.apache.kafka.connect.json.JsonConverter",  
        "key.converter.schemas.enable": false,  
        "value.converter.schemas.enable": false,  
        "document.id.strategy.overwrite.existing": true,  
        "document.id.strategy": "com.mongodb.kafka.connect.sink.processor.id.strategy.FullKeyStrategy",  
        "writemodel.strategy": "com.mongodb.kafka.connect.sink.writemodel.strategy.ReplaceOneBusinessKeyStrategy",  
        "post.processor.chain": "sinkPostProcessor.ObjectIdPostProcessor",  
        "value.projection.list": "id,targetId"  
    }  
}'</span>  
</pre></table></code></div></div></ul></ul><h2 id="추가---custom-post-processor-에러-확인">추가 - Custom Post Processor 에러 확인</h2><ul><li>mongoDB sink connector 생성 시<br /> PostProcessor에 에러가 있는 경우 ,<br /> kafka-connect container 로그에서 확인할 수 있다.<li>mongoDB sink connector는 생성 후<br /> 처리 중에 에러가 발생했을 경우,<br /> GET connectors/{connector-name}/status 명령으로 확인할 수 있다.<div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>curl <span class="nt">--location</span> <span class="s1">'http://localhost:8083/connectors/mongo-sink-user/status'</span>  
</pre></table></code></div></div></ul><h2 id="추가---objectidpostprocessorjar-파일">추가 - ObjectIdPostProcessor.jar 파일</h2><ul><li><a href="https://github.com/a3magic3pocket/copystagram-backend-post-processor/blob/main/ObjectIdPostProcessor-0.0.1.jar" target="_blank">ObjectIdPostProcessor.jar 파일</a> 링크에서 <br /> download raw file을 눌러 다운로드 할 수 있다.<li>ObjectIdPostProcessor를 그대로 사용하고 싶은 경우<br /> 위 jar 파일만 받아서 mongoDB sink connector plugin 디렉토리에 복사하여<br /> 사용하면 된다.</ul><h2 id="참고">참고</h2><ul><li><a href="https://www.mongodb.com/community/forums/t/how-to-convert-a-string-field-to-objectid-in-mongosinkconnector/108324/6" target="_blank">참고1 - How to convert a String field to ObjectId in MongoSinkConnector</a><li><a href="https://www.mongodb.com/docs/kafka-connector/current/sink-connector/fundamentals/post-processors/#how-to-create-a-custom-post-processor" target="_blank">참고2 - How to Create a Custom Post Processor</a><li><a href="https://stackoverflow.com/questions/9170832/list-of-java-class-file-format-major-version-numbers" target="_blank">참고3 - List of Java class file format major version numbers?</a><li><a href="https://jdk.java.net/java-se-ri/11-MR2" target="_blank">참고4 - Java Platform, Standard Edition 11 Reference Implementations</a><li><a href="https://jiurinie.tistory.com/123" target="_blank">참고5 - 이클립스에서 Gralde Project 생성하기(feat. java-library)</a><li><a href="https://chinsun9.github.io/2020/10/05/gradle/" target="_blank">참고6 - 이클립스에서 gradle 프로젝트 생성하기</a><li><a href="https://bioinfoblog.tistory.com/242" target="_blank">참고7 - 이클립스에서 실행 가능한 JAR 파일 만들기</a><li><a href="https://a3magic3pocket.github.io/posts/mongodb-sink-connector-fullkeystrategy/" target="_blank">참고8 - mongoDB Sink Connector, FullKeyStrategy id-strategy 사용하기</a><li><a href="https://github.com/mongodb/mongo-kafka/blob/master/src/main/java/com/mongodb/kafka/connect/sink/processor/PostProcessor.java" target="_blank">참고 - com.mongodb.kafka.connect.sink.processor.PostProcessor.java</a><li><a href="https://github.com/mongodb/mongo-kafka/blob/master/src/main/java/com/mongodb/kafka/connect/sink/processor/KafkaMetaAdder.java" target="_blank">참고 - com.mongodb.kafka.connect.sink.processor.KafkaMetaAdder.java</a></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/kafka/'>Kafka</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/kafka/" class="post-tag no-text-decoration" >kafka</a> <a href="/tags/kafka-connect/" class="post-tag no-text-decoration" >kafka-connect</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=카프카 커넥트(kafka connect), Custom Post Processor 만들기 - 의사줌치&url=https://a3magic3pocket.github.io/posts/kafka-connect-custom-post-processor/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=카프카 커넥트(kafka connect), Custom Post Processor 만들기 - 의사줌치&u=https://a3magic3pocket.github.io/posts/kafka-connect-custom-post-processor/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=카프카 커넥트(kafka connect), Custom Post Processor 만들기 - 의사줌치&url=https://a3magic3pocket.github.io/posts/kafka-connect-custom-post-processor/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/kafka-large-scale-event-processing-architecture-and-performance-comparison/">Kafka를 활용한 대용량 이벤트 처리 구조 설계와 성능 비교</a><li><a href="/posts/experimenting-with-blue-green-deployments/">블루 - 그린 배포 실험</a><li><a href="/posts/spring-kafka-latest-message-pub-sub-config/">Spring Kafka에서 최신 메시지만 소비하는 Pub/Sub 방식 설정</a><li><a href="/posts/solving-concurrency-problems-with-performance-in-mind/">동시성 문제 해결 방안 성능 실험</a><li><a href="/posts/exploring-authentication-options/">인증방식 고민</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/kafka/">kafka</a> <a class="post-tag" href="/tags/kotlin/">kotlin</a> <a class="post-tag" href="/tags/elasticsearch/">elasticsearch</a> <a class="post-tag" href="/tags/elk/">elk</a> <a class="post-tag" href="/tags/spring/">spring</a> <a class="post-tag" href="/tags/summary/">summary</a> <a class="post-tag" href="/tags/git/">git</a> <a class="post-tag" href="/tags/kafka-streams/">kafka-streams</a> <a class="post-tag" href="/tags/nest/">nest</a> <a class="post-tag" href="/tags/react/">react</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/write-kafka-stream-to-mongodb-using-kafka-connect/"><div class="card-body"> <span class="timeago small" > Mar 27, 2024 <i class="unloaded">2024-03-27T23:23:11+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>카프카 커넥트(kafka connect)로 mongoDB에 카프카 스트림 쓰기</h3><div class="text-muted small"><p> 개요 카프카 스트림의 취합된 결과를 외부 스토리지에 저장하고 싶을 때가 있다. 이때 결과가 담긴 토픽 데이터를 카프카 커넥트(kafka connect)를 이용하여 다른 스토리지에 저장한다. 카프카, mongodb, 카프카 커넥트를 도커 컴포즈로 구축한다. 카프카 커넥트 카프카 커넥트는 카프카 스트림 데이터를 다른 스토리지로 옮...</p></div></div></a></div><div class="card"> <a href="/posts/kafka-connect-json-schema/"><div class="card-body"> <span class="timeago small" > Apr 5, 2024 <i class="unloaded">2024-04-05T11:36:01+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>카프카 커넥트(kafka connect), json 스키마 사용하기</h3><div class="text-muted small"><p> 개요 카프카 스트림(kafka streams) 데이터를 mongoDB로 보낼때 타입을 명시하고 싶을 때가 있다. 이때 json 스키마를 사용할 수 있다. 정해진 포맷에 맞춰 작성 후 데이터를 담아 보내면 mongodb가 데이터를 지정된 타입으로 인식하고 저장한다. json 스키마는 매번 스키마를 같이 보내야하기 때문에 전송되는 데이터 ...</p></div></div></a></div><div class="card"> <a href="/posts/mongodb-sink-connector-fullkeystrategy/"><div class="card-body"> <span class="timeago small" > Apr 8, 2024 <i class="unloaded">2024-04-08T18:22:46+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>mongoDB Sink Connector, FullKeyStrategy id-strategy 사용하기</h3><div class="text-muted small"><p> 개요 PartialValueStrategy 사용할 때 Custom Post Processor를 사용하는 경우, 키로 사용되는 필드가 Post Processing 대상이 되면 ReplaceOneBusinessKeyStrategy이 동작하지 않는다. id-strategy와 상관없이 Post Processing을 적용하기 쉽도록 메세지 키를 이용...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/kafka-connect-json-schema/" class="btn btn-outline-primary" prompt="Older"><p>카프카 커넥트(kafka connect), json 스키마 사용하기</p></a> <a href="/posts/mongodb-sink-connector-fullkeystrategy/" class="btn btn-outline-primary" prompt="Newer"><p>mongoDB Sink Connector, FullKeyStrategy id-strategy 사용하기</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://github.com/a3magic3pocket">의사줌치</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/kafka/">kafka</a> <a class="post-tag" href="/tags/kotlin/">kotlin</a> <a class="post-tag" href="/tags/elasticsearch/">elasticsearch</a> <a class="post-tag" href="/tags/elk/">elk</a> <a class="post-tag" href="/tags/spring/">spring</a> <a class="post-tag" href="/tags/summary/">summary</a> <a class="post-tag" href="/tags/git/">git</a> <a class="post-tag" href="/tags/kafka-streams/">kafka streams</a> <a class="post-tag" href="/tags/nest/">nest</a> <a class="post-tag" href="/tags/react/">react</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://a3magic3pocket.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
